define("Ruroc_Catalog/js/product-navigation",["uiComponent","jquery","underscore","matchMedia"],(function(e,$,t,i){"use strict";return e.extend({defaults:{breakpoint:"(max-width: 1023px)"},initialize:function(e,t){this._super();var a=this;return this.element=$(t),this.list=this.element.find(".product-navigation-list"),this.listItems=this.element.find(".product-navigation-list-item"),this.control=this.element.find(".product-navigation-control"),i({media:this.breakpoint,entry:function(){a.isMobile=!0,a.listItemScrollPositions=a.getScrollPositions()},exit:function(){a.isMobile=!1,a.listItemScrollPositions=a.getScrollPositions()}}),this.setScrollClasses(),this.setupScrollListener(),this.setupClickListener(),this},getScrollPosition:function(){return this.isMobile?this.list.scrollLeft():this.list.scrollTop()},setScrollPosition:function(e){var t=this;this.list.css({scrollSnapType:"initial"}),this.list.animate({[this.isMobile?"scrollLeft":"scrollTop"]:e},{duration:200,complete:function(){t.list.css({scrollSnapType:"both mandatory"})}})},getScrollPositions:function(){var e=this;return t.map(this.listItems.toArray(),(function(t){return $(t).position()[e.isMobile?"left":"top"]}))},getNextScrollPosition:function(e){var i="left"===e,a=this.getScrollPosition(),o=this.listItemScrollPositions,n=t.reduce(o,(function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}));return o[t.indexOf(o,n)+(i?-1:1)]},setupClickListener:function(){var e=this;this.control.on("click",(function(){var t=$(this).data("direction");e.setScrollPosition(e.getNextScrollPosition(t))}))},setScrollClasses:function(){var e=this.getScrollPosition(),t=this.list[0][this.isMobile?"scrollWidth":"scrollHeight"]-this.list[this.isMobile?"outerWidth":"outerHeight"]();this.element.removeClass("right").removeClass("left"),e?e>=t?this.element.addClass("left"):this.element.addClass("right").addClass("left"):this.element.addClass("right")},setupScrollListener:function(){this.list.on("scroll",this.setScrollClasses.bind(this))}})})),define("Magento_Cookie/js/require-cookie",["jquery","Magento_Ui/js/modal/alert","jquery-ui-modules/widget","mage/mage","mage/translate"],(function($,e){"use strict";return $.widget("mage.requireCookie",{options:{event:"click",noCookieUrl:"enable-cookies",triggers:[".action.login",".action.submit"],isRedirectCmsPage:!0},_create:function(){this._bind()},_bind:function(){var e={};$.each(this.options.triggers,(function(t,i){e["click "+i]="_checkCookie"})),this._on(e)},_checkCookie:function(t){navigator.cookieEnabled||(t.preventDefault(),this.options.isRedirectCmsPage?window.location=this.options.noCookieUrl:e({content:$.mage.__("Cookies are disabled in your browser.")}))}}),$.mage.requireCookie})),define("Ruroc_Upsells/js/product-upsell-item",["uiComponent","uiRegistry","jquery","ko","Magento_Ui/js/modal/modal","Magento_Catalog/js/product/delivery-dates"],(function(e,t,$,i){"use strict";return e.extend({initialize:function(e,a){this._super();var o=this;return this.element=$(a),this.isSelected=i.observable(!1),this.deliveryMessage=t.get("delivery-message"),this.deliveryMessage&&this.deliveryMessage.isCrossFulfilled.subscribe((function(e){e&&o.isSelected(!1),o.element.closest(".description-upsells-container").toggle(!e)})),$(document).on("upsellsUnselect",(function(){o.isSelected(!1)})),t.set(e.scope,this),this},setSelected:function(){this.isSelected(!this.isSelected())}})})),define("Magento_Catalog/js/related-products",["jquery","jquery-ui-modules/widget","mage/translate"],(function($){"use strict";return $.widget("mage.relatedProducts",{options:{relatedCheckbox:".related-checkbox",relatedProductsCheckFlag:!1,relatedProductsField:"#related-products-field",selectAllMessage:$.mage.__("select all"),unselectAllMessage:$.mage.__("unselect all"),selectAllLink:'[data-role="select-all"]',elementsSelector:".item.product"},_create:function(){$(this.options.selectAllLink,this.element).on("click",$.proxy(this._selectAllRelated,this)),$(this.options.relatedCheckbox,this.element).on("click",$.proxy(this._addRelatedToProduct,this)),this.element.data("shuffle")&&this._shuffle(this.element.find(this.options.elementsSelector)),this._showRelatedProducts(this.element.find(this.options.elementsSelector),this.element.data("limit"),this.element.data("shuffle-weighted"))},_selectAllRelated:function(e){var t=this.options.relatedProductsCheckFlag?this.options.selectAllMessage:this.options.unselectAllMessage;return $(e.target).html(t),$(this.options.relatedCheckbox).attr("checked",this.options.relatedProductsCheckFlag=!this.options.relatedProductsCheckFlag),this._addRelatedToProduct(),!1},_addRelatedToProduct:function(){$(this.options.relatedProductsField).val($(this.options.relatedCheckbox+":checked").map((function(){return this.value})).get().join(","))},_showRelatedProducts:function(e,t,i){var a,o,n,r,s=[],l=[],u=2,d=0;if(0===t&&(t=e.length),i&&t>0&&t<e.length){for(a=0;a<t&&""===(o=$(e[a])).data("shuffle-group");a++)o.show(),d++;for(t-=d,a=e.length-1;a>=0;a--)""!==(n=(o=$(e[a])).data("shuffle-group"))&&(s.push([a,Math.log(u)]),void 0!==r&&r!==n&&(u+=2),r=n);if(0===s.length)return;for(a=0;a<s.length;a++)l.push([s[a][0],Math.pow(Math.random(),1/s[a][1])]);for(l.sort((function(e,t){return(e=e[1])<(t=t[1])?1:e>t?-1:0})),a=0;t;)$(e[l[a][0]]).show(),t--,a++}else for(a=0;a<t;a++)$(e[a]).show()},_shuffle:function(e){var t,i;for(e.length&&(t=$(e[0]).parent());e.length;)i=e.splice(Math.floor(Math.random()*e.length),1)[0],t.find('[data-shuffle-group="'+$(i).data("shuffle-group")+'"]').last().after(i)}}),$.mage.relatedProducts})),define("Ruroc_Upsells/js/product-upsell-modal",["uiComponent","uiRegistry","jquery","ko","js/popup/default"],(function(e,t,$,i,a){"use strict";return e.extend({initialize:function(e,t){this._super();var i=this;this.upsellId=null;var o=a({type:"popup",modalClass:"power-buttons-modal",opened:function(){var e=$(this),t=e.find(".gallery-placeholder"),i=e.find(".fotorama__stage");t.find(".gallery-placeholder__image").remove(),t.removeClass("_block-content-loading").css("min-height",""),i.css("position","")},buttons:!1},t);return $(".upsell-option-popup-trigger").on("click",(function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".upsell-option").attr("data-id");t&&(i.upsellId=t,$(".power-buttons-modal-content-inner").hide(),$("#power-buttons-modal-content-inner-"+t).show(),o.openModal())})),this}})})),define("js/popup/catalog/product/sizing",["jquery","ko","underscore","uiRegistry","mage/translate","Magento_Ui/js/lib/view/utils/dom-observer","jquery-ui-modules/widget","jquery-ui-modules/core","js/popup/default"],(function($,e,t,i,a,o){"use strict";return $.widget("rugento.popupSizing",$.rugento.popupDefault,{options:{buttons:[{text:a("Finish"),class:"finish",click:function(){this.closeModal()}}]},_create:function(){return this._super(),this.brand=this.options.brand,this.guideType=this.options.guideType,this.rurocKey=this.options.rurocKey,this.enginehawkKey=this.options.enginehawkKey,this.measurements={centimeters:{key:"centimeters",name:a("Centimeters"),symbol:"cm"},inches:{key:"inches",name:a("Inches"),symbol:'"',multiplier:.3937}},this.unit=e.observable(this.options.defaultUnit),this.sizes=e.observableArray(t.toArray(this.getCorrectMeasurements())),this.brand===this.rurocKey&&(this.userSize=e.observable(),this.recommendedSize=e.observable(),this.message=e.observable(),this.setupInputSubscriber()),this.setupUnitSubscriber(),i.set("sizing-popup",this),this},setUnit:function(e){this.unit($(e).data("measurement"))},getMeasurementName:function(e){return this.measurements[e].name},getMeasurementTypes:function(){return{chest:{index:a("A"),value:a("Chest")},waist:{index:a("B"),value:a("Waist")},hips:{index:a("C"),value:a("Hips")},sleeves:{index:a("D"),value:a("Sleeves"),info:a("Measure from centre point of back down to the wrist.")}}},getMeasurementInformation:function(){var e=this.getMeasurementTypes(),i=1;return t.each(e,(function(e){return e.info&&(e.asterisk="*".repeat(i),i++),e})),e},getMeasurementNames:function(){var e=this.getMeasurements()[this.guideType][this.unit()];return t.map(e,(function(e){return e.name}))},getAlternateMeasurementNames:function(){var e=this.getMeasurements()[this.guideType][this.unit()];return t.map(e,(function(e){return e.altName}))},hasAlternateMeasurementNames:function(){return t.keys(this.getMeasurements()[this.guideType][this.unit()]).length===t.compact(this.getAlternateMeasurementNames()).length},getMeasurementSymbol:function(e){return this.measurements[e].symbol},getMeasurementMultiplier:function(e){return this.measurements[e].multiplier},setAlternateMeasurement:function(e){var i=this;return t.each(e,(function(e){t.each(e,(function(e){e.values=t.mapObject(e.values,(function(e){return parseFloat((e*i.getMeasurementMultiplier(i.unit())).toFixed(2))}))}))})),e},getMeasurements:function(){return{[this.rurocKey]:{Atlas:{XS:{name:a("Extra Small (XS)"),values:{min:53,max:54}},S:{name:a("Small (S)"),values:{min:55,max:56}},M:{name:a("Medium (M)"),values:{min:57,max:58}},L:{name:a("Large (L)"),values:{min:59,max:60}},XL:{name:a("Extra Large (XL)"),values:{min:61,max:62}},XXL:{name:a("Extra Extra Large (XXL)"),values:{min:63,max:64}}},RG1:{YLS:{name:a("Youth Large / Small (YL/S)"),values:{min:52,max:57}},ML:{name:a("Medium / Large (M/L)"),values:{min:57,max:60}},XL:{name:a("Extra Large (XL/XXL)"),values:{min:60,max:64}}},Lite:{YLS:{name:a("Youth Large / Small (YL/S)"),values:{min:52,max:57}},ML:{name:a("Medium / Large (M/L)"),values:{min:57,max:60}},XL:{name:a("Extra Large (XL/XXL)"),values:{min:60,max:64}}},"Atlas 4.0":{XXS:{name:a("XXS"),values:{min:52.5,max:53.9}},XS:{name:a("XS"),values:{min:54,max:55.4}},SM:{name:a("SM"),values:{min:55.5,max:57.4}},ML:{name:a("ML"),values:{min:57.5,max:60.4}},LXL:{name:a("L/XL"),values:{min:60.5,max:61.9}},XLXXL:{name:a("XL/XXL"),values:{min:62,max:63.5}}}},[this.enginehawkKey]:{Jacket:{centimeters:{S:{name:a("S"),values:{chest:{min:96,max:102},waist:{min:88,max:94},hips:{min:88,max:94},sleeves:{min:84}}},M:{name:a("M"),values:{chest:{min:102,max:107},waist:{min:94,max:99},hips:{min:94,max:99},sleeves:{min:86}}},L:{name:a("L"),values:{chest:{min:107,max:112},waist:{min:99,max:104},hips:{min:99,max:104},sleeves:{min:88}}},XL:{name:a("XL"),values:{chest:{min:112,max:120},waist:{min:104,max:116},hips:{min:104,max:116},sleeves:{min:90}}},XXL:{name:a("XXL"),values:{chest:{min:120,max:127},waist:{min:116,max:123},hips:{min:116,max:123},sleeves:{min:92}}},XXXL:{name:a("XXXL"),values:{chest:{min:127,max:134},waist:{min:123,max:130},hips:{min:123,max:130},sleeves:{min:94}}}},inches:{S:{name:a("S"),values:{chest:{min:38,max:40},waist:{min:35,max:37},hips:{min:35,max:37},sleeves:{min:33}}},M:{name:a("M"),values:{chest:{min:40,max:42},waist:{min:37,max:39},hips:{min:37,max:39},sleeves:{min:34}}},L:{name:a("L"),values:{chest:{min:42,max:44},waist:{min:39,max:41},hips:{min:39,max:41},sleeves:{min:35}}},XL:{name:a("XL"),values:{chest:{min:44,max:47},waist:{min:41,max:45},hips:{min:41,max:45},sleeves:{min:35.5}}},XXL:{name:a("XXL"),values:{chest:{min:47,max:50},waist:{min:45,max:48},hips:{min:45,max:48},sleeves:{min:36}}},XXXL:{name:a("XXXL"),values:{chest:{min:50,max:53},waist:{min:48,max:51},hips:{min:48,max:51},sleeves:{min:37}}}}},"Women's Jacket":{centimeters:{S:{name:a("S"),altName:a("1"),values:{chest:{min:85,max:93},waist:{min:74,max:82},hips:{min:90,max:98},sleeves:{min:84}}},M:{name:a("M"),altName:a("2"),values:{chest:{min:93,max:101},waist:{min:82,max:90},hips:{min:98,max:106},sleeves:{min:86}}},L:{name:a("L"),altName:a("3"),values:{chest:{min:101,max:109},waist:{min:90,max:98},hips:{min:106,max:114},sleeves:{min:88}}},XL:{name:a("XL"),altName:a("4"),values:{chest:{min:109,max:117},waist:{min:98,max:106},hips:{min:114,max:122},sleeves:{min:90}}},XXL:{name:a("2XL"),altName:a("5"),values:{chest:{min:117,max:125},waist:{min:106,max:114},hips:{min:122,max:130},sleeves:{min:92}}}},inches:{S:{name:a("S"),altName:a("1"),values:{chest:{min:34,max:37},waist:{min:29,max:32},hips:{min:35,max:39},sleeves:{min:33}}},M:{name:a("M"),altName:a("2"),values:{chest:{min:37,max:40},waist:{min:32,max:35},hips:{min:39,max:42},sleeves:{min:34}}},L:{name:a("L"),altName:a("3"),values:{chest:{min:40,max:43},waist:{min:35,max:39},hips:{min:42,max:45},sleeves:{min:35}}},XL:{name:a("XL"),altName:a("4"),values:{chest:{min:43,max:46},waist:{min:39,max:42},hips:{min:45,max:48},sleeves:{min:35.5}}},XXL:{name:a("2XL"),altName:a("5"),values:{chest:{min:46,max:49},waist:{min:42,max:45},hips:{min:48,max:51},sleeves:{min:36}}}}}}}[this.brand]},getCorrectMeasurements:function(){var e=this.getMeasurements(),t=this.unit()===this.measurements.centimeters.key;return this.brand===this.enginehawkKey?e[this.guideType][this.unit()]:t?e[this.guideType]:this.setAlternateMeasurement(e)[this.guideType]},userSizeIsValid:function(){var e=parseFloat(this.userSize()),t=!isNaN(e),i=e.toString().length>=2;return t&&i},setRecommendedMeasurement:function(){var e=parseFloat(this.userSize()),i=this.getCorrectMeasurements(),o=null;if(this.message(""),t.each(i,(function(a,n){var r=a.values,s=r.min,l=r.max,u=t.keys(i),d=u.indexOf(n);if(e>=s&&e<=l)o=a.name;else if(e>l){var c=i[u[d+1]];o=c?c.name:null}})),!o){var n=t.keys(i),r=i[t.first(n)],s=i[t.last(n)];this.userSizeIsValid()&&(e<r.values.min?(this.message(a("Your head size is outside the range of our smallest size. Please contact customer support for advice.")),o=r.name):e>s.values.max&&(this.message(a("Your head size is outside the range of our biggest size. Please contact customer support for advice.")),o=s.name))}return o},setupUnitSubscriber:function(){var e=this;this.unit.subscribe((function(){e.brand===e.rurocKey&&e.userSize()&&e.recommendedSize(e.setRecommendedMeasurement()),e.sizes(t.toArray(e.getCorrectMeasurements()))}))},setupInputSubscriber:function(){var e=this;this.userSize.subscribe((function(){e.recommendedSize(e.setRecommendedMeasurement())}))}}),$.rugento.popupSizing})),define("Ruroc_Catalog/js/key-features",["uiComponent","jquery","mage/translate"],(function(e,$,t){"use strict";return e.extend({initialize:function(e,i){this._super();var a=this;return this.element=$(i),this.show=this.element.find(".key-features-show-more"),this.show.on("click",(function(){a.element.toggleClass("active"),a.show.find("span").text(a.element.hasClass("active")?t("Hide full features breakdown"):t("Full features breakdown"))})),this}})})),define("Magento_GoogleTagManager/js/actions/product-detail",["jquery","Magento_GoogleTagManager/js/google-tag-manager"],(function($){"use strict";function e(e){window.dataLayer.push({event:"productDetail",ecommerce:{detail:{products:[e]},impressions:[]}})}return function(t){window.dataLayer?e(t):$(document).on("ga:inited",e.bind(this,t))}})),define("Magento_Catalog/js/gallery",["jquery","jquery-ui-modules/widget"],(function($){"use strict";return $.widget("mage.gallery",{options:{minWidth:300,widthOffset:90,heightOffset:210,closeWindow:'div.buttons-set a[role="close-window"]'},_create:function(){$(this.options.closeWindow).on("click",(function(){window.close()})),this._resizeWindow()},_resizeWindow:function(){var e=this.element,t=e.width()<this.options.minWidth?this.options.minWidth:e.width();window.resizeTo(t+this.options.widthOffset,e.height()+this.options.heightOffset)}}),$.mage.gallery})),define("Magento_ProductVideo/js/load-player",["jquery","jquery-ui-modules/widget"],(function($){"use strict";var e={_register:{},isRegistered:function(e){return void 0!==this._register[e]},isLoaded:function(e){return void 0!==this._register[e]&&!0===this._register[e]},register:function(e,t){t=t||!1,this._register[e]=t}};$.widget("mage.productVideoLoader",{_create:function(){switch(this.element.data("type")){case"youtube":this.element.videoYoutube(),this._player=this.element.data("mageVideoYoutube");break;case"vimeo":this.element.videoVimeo(),this._player=this.element.data("mageVideoVimeo");break;default:throw{name:"Video Error",message:"Unknown video type",toString:function(){return this.name+": "+this.message}}}},_initialize:function(){this._params=this.element.data("params")||{},this._code=this.element.data("code"),this._width=this.element.data("width"),this._height=this.element.data("height"),this._autoplay=!!this.element.data("autoplay"),this._playing=this._autoplay||!1,this._loop=this.element.data("loop"),this._rel=this.element.data("related"),this.useYoutubeNocookie=this.element.data("youtubenocookie")||!1,this._responsive=!1!==this.element.data("responsive"),!0===this._responsive&&this.element.addClass("responsive"),this._calculateRatio()},play:function(){this._player.play()},pause:function(){this._player.pause()},stop:function(){this._player.stop()},playing:function(){return this._player.playing()},destroy:function(){this._player.destroy()},_calculateRatio:function(){this._responsive&&this.element.css("paddingBottom",this._height/this._width*100+"%")}}),$.widget("mage.videoYoutube",$.mage.productVideoLoader,{_create:function(){var e=this;this._initialize(),this.element.append("<div/>"),this._on(window,{youtubeapiready:function(){var t="https://www.youtube.com";e.useYoutubeNocookie&&(t="https://www.youtube-nocookie.com"),void 0===e._player&&(e._autoplay=!0,e._autoplay&&(e._params.autoplay=1),e._rel||(e._params.rel=0),e._player=new window.YT.Player(e.element.children(":first")[0],{height:e._height,width:e._width,videoId:e._code,playerVars:e._params,host:t,events:{onReady:function(){e._player.getDuration(),e.element.closest(".fotorama__stage__frame").addClass("fotorama__product-video--loaded")},onStateChange:function(t){if(1===window.parseInt(t.data,10))e._playing=!0;else e._playing=!1;e._trigger("statechange",{},t),t.data===window.YT.PlayerState.ENDED&&e._loop&&e._player.playVideo()}}}))}}),this._loadApi()},_loadApi:function(){var t,i;e.isRegistered("youtube")?e.isLoaded("youtube")&&$(window).trigger("youtubeapiready"):(e.register("youtube"),t=document.createElement("script"),i=document.getElementsByTagName("script")[0],t.async=!0,t.src="https://www.youtube.com/iframe_api",i.parentNode.insertBefore(t,i),window.onYouTubeIframeAPIReady=function(){$(window).trigger("youtubeapiready"),e.register("youtube",!0)})},play:function(){this._player.playVideo(),this._playing=!0},pause:function(){this._player.pauseVideo(),this._playing=!1},stop:function(){this._player.stopVideo(),this._playing=!1},playing:function(){return this._playing},destroy:function(){this.stop(),this._player.destroy()}}),$.widget("mage.videoVimeo",$.mage.productVideoLoader,{_create:function(){var e,t,i="";this._initialize(),e=(new Date).getTime(),this._autoplay=!0,this._autoplay&&(i+="&autoplay=1"),this._loop&&(i+="&loop=1"),t="https://player.vimeo.com/video/"+this._code+"?api=1&player_id=vimeo"+this._code+e+i,this.element.append($("<iframe/>").attr("frameborder",0).attr("id","vimeo"+this._code+e).attr("width",this._width).attr("height",this._height).attr("src",t).attr("webkitallowfullscreen","").attr("mozallowfullscreen","").attr("allowfullscreen","").attr("referrerPolicy","origin").attr("allow","autoplay")),this._player=window.$f(this.element.children(":first")[0]),this._player.addEvent("ready",(function(e){$("#"+e).closest(".fotorama__stage__frame").addClass("fotorama__product-video--loaded")}))},play:function(){this._player.api("play"),this._playing=!0},pause:function(){this._player.api("pause"),this._playing=!1},stop:function(){this._player.api("unload"),this._playing=!1},playing:function(){return this._playing}})})),define("Magento_ProductVideo/js/fotorama-add-video-events",["jquery","jquery-ui-modules/widget","catalogGallery","loadPlayer"],(function($){"use strict";var e=!0;function t(e,t){var i,a,o,n,r=!1;return"string"!=typeof e?e:((e=function(e){var t=document.createElement("a");return t.href=e,t}(e)).host.match(/youtube\.com/)&&e.search?(i=e.search.split("v=")[1])&&(i=function(e){if(e){if(-1===(o=e.indexOf("&")))return e;e=e.substring(0,o)}return e}(i),a="youtube"):e.host.match(/youtube\.com|youtu\.be|youtube-nocookie.com/)?(i=e.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),a="youtube",e.host.match(/youtube-nocookie.com/)&&(r=!0)):e.host.match(/vimeo\.com/)&&(a="vimeo",n=new RegExp(["https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)","?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)"].join("")),i=e.href.match(n)[3]),i&&a||!t||(i=e.href,a="custom"),!!i&&{id:i,type:a,s:e.search.replace(/^\?/,""),useYoutubeNocookie:r})}return $.widget("mage.AddFotoramaVideoEvents",{options:{videoData:"",videoSettings:"",optionsVideoData:"",dataMergeStrategy:"replace",vimeoJSFrameworkLoaded:!1},onVimeoJSFramework:function(){},defaultVideoData:[],PV:"product-video",VU:"video-unplayed",PVLOADED:"fotorama__product-video--loaded",PVLOADING:"fotorama__product-video--loading",VID:"video",VI:"vimeo",FTVC:"fotorama__video-close",FTAR:"fotorama__arr",fotoramaSpinner:"fotorama__spinner",fotoramaSpinnerShow:"fotorama__spinner--show",TI:"video-thumb-icon",isFullscreen:!1,FTCF:'[data-gallery-role="fotorama__fullscreen-icon"]',Base:0,MobileMaxWidth:767,GP:"gallery-placeholder",videoData:null,videoDataPlaceholder:[{id:"",isBase:!0,mediaType:"image",provider:""}],_create:function(){$(this.element).on("gallery:loaded",$.proxy((function(){this.fotoramaItem=$(this.element).find(".fotorama-item"),this._initialize()}),this))},_initialize:function(){this.defaultVideoData.length||(this.defaultVideoData=this.options.videoData),this.defaultVideoData.length||this.options.videoData.length||(this.defaultVideoData=this.options.videoData=this.videoDataPlaceholder),this.clearEvents(),this._checkForVideoExist()&&(this._checkFullscreen(),this._listenForFullscreen(),this._checkForVimeo(),this._isVideoBase(),this._initFotoramaVideo(),this._attachFotoramaEvents())},clearEvents:function(){void 0!==this.fotoramaItem&&this.fotoramaItem.off("fotorama:show."+this.PV+" fotorama:showend."+this.PV+" fotorama:fullscreenenter."+this.PV+" fotorama:fullscreenexit."+this.PV)},_setOptions:function(e){e.videoData&&e.videoData.length&&(this.options.videoData=e.videoData),this._loadVideoData(e),this._initialize()},_loadVideoData:function(e){e.selectedOption?"prepend"===e.dataMergeStrategy?this.options.videoData=[].concat(this.options.optionsVideoData[e.selectedOption],this.defaultVideoData):this.options.videoData=this.options.optionsVideoData[e.selectedOption]:this.options.videoData=this.defaultVideoData},_checkFullscreen:function(){this.fotoramaItem.data("fotorama").fullScreen&&(this.isFullscreen=!0)},_listenForFullscreen:function(){this.fotoramaItem.on("fotorama:fullscreenenter."+this.PV,$.proxy((function(){this.isFullscreen=!0}),this)),this.fotoramaItem.on("fotorama:fullscreenexit."+this.PV,$.proxy((function(){this.isFullscreen=!1,this._hideVideoArrows()}),this))},_createVideoData:function(e,i){var a,o,n,r,s=[];for(i&&(e=$.parseJSON(e)),r=0;r<e.length;r++)n=e[r],a="",(o={mediaType:"",isBase:"",id:"",provider:""}).mediaType=this.VID,"external-video"!==n.mediaType&&(o.mediaType=n.mediaType),o.isBase=n.isBase,n.videoUrl&&null!==n.videoUrl&&(a=t(a=n.videoUrl),o.id=a.id,o.provider=a.type,o.videoUrl=n.videoUrl,o.useYoutubeNocookie=a.useYoutubeNocookie),s.push(o);return s},_createCloseVideo:function(e,t){var i;this.fotoramaItem.find("."+this.FTVC).remove(),this.fotoramaItem.append('<div class="'+this.FTVC+'"></div>'),this.fotoramaItem.css("position","relative"),i=this.fotoramaItem.find("."+this.FTVC),this._closeVideoSetEvents(i,e),t&&this.options.videoData[e.activeIndex].isBase&&$(window).width()>this.MobileMaxWidth&&this._showCloseVideo()},_hideCloseVideo:function(){this.fotoramaItem.find("."+this.FTVC).removeClass("fotorama-show-control")},_showCloseVideo:function(){this.fotoramaItem.find("."+this.FTVC).addClass("fotorama-show-control")},_closeVideoSetEvents:function(e,t){e.on("click",$.proxy((function(){this._unloadVideoPlayer(t.activeFrame.$stageFrame.parent(),t,!0),this._hideCloseVideo()}),this))},_checkForVideoExist:function(){var e,t,i,a;if(!this.options.videoData)return!1;if(!this.options.videoSettings)return!1;for(e in t=this._createVideoData(this.options.videoData,!1),i=!1,(a=this.options.videoSettings[0]).playIfBase=parseInt(a.playIfBase,10),a.showRelated=parseInt(a.showRelated,10),a.videoAutoRestart=parseInt(a.videoAutoRestart,10),t)t[e].mediaType===this.VID&&(i=!0);return i&&(this.options.videoData=t),i},_checkForVimeo:function(){var e,t=this.options.videoData;if(!window.Froogaloop)for(e in t)if(t[e].provider===this.VI)return void this._loadVimeoJSFramework()},_isVideoBase:function(){var t,i,a,o=this.options.videoData;for(i=Object.keys(o),a=0;a<i.length;a++)(t=o[i[a]]).mediaType===this.VID&&t.isBase&&this.options.videoSettings[0].playIfBase&&e&&(this.Base=!0,e=!1);this.isFullscreen||this._createCloseVideo(this.fotoramaItem.data("fotorama"),this.Base)},_loadVimeoJSFramework:function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.async=!0,e.src="https://unpkg.com/vimeo-froogaloop2@0.1.0/javascript/froogaloop.min.js",e.onload=function(){this.onVimeoJSFramework(),this.vimeoJSFrameworkLoaded=!0}.bind(this),t.parentNode.insertBefore(e,t)},_initFotoramaVideo:function(e){var t,i,a=this.fotoramaItem.data("fotorama");if(!a.activeFrame.$navThumbFrame)return this.fotoramaItem.on("fotorama:showend."+this.PV,$.proxy((function(e,t){$(t.activeFrame.$stageFrame).removeAttr("href")}),this)),this._startPrepareForPlayer(e,a),null;for(a.data.map($.proxy(this._setItemType,this)),t=a.activeFrame.$navThumbFrame.parent().find(".fotorama__nav__frame:visible"),i=0;i<t.length;i++)this._setThumbsIcon(t.eq(i),i),this._checkForVideo(e,a,i+1);this.fotoramaItem.on("fotorama:showend."+this.PV,$.proxy((function(e,t){$(t.activeFrame.$stageFrame).removeAttr("href")}),this))},_setThumbsIcon:function(e,t){var i=this.fotoramaItem.data("fotorama");"dots"===i.options.nav&&e.hasClass(this.TI)&&e.removeClass(this.TI),this.options.videoData[t].mediaType===this.VID&&i.data[t].type===this.VID&&"thumbs"===i.options.nav&&e.addClass(this.TI)},_setItemType:function(e,t){!e.type&&(e.type=this.options.videoData[t].mediaType)},_attachFotoramaEvents:function(){this.fotoramaItem.on("fotorama:showend."+this.PV,$.proxy((function(e,t){this._startPrepareForPlayer(e,t)}),this)),this.fotoramaItem.on("fotorama:show."+this.PV,$.proxy((function(e,t){this._unloadVideoPlayer(t.activeFrame.$stageFrame.parent(),t,!0)}),this)),this.fotoramaItem.on("fotorama:fullscreenexit."+this.PV,$.proxy((function(e,t){t.activeFrame.$stageFrame.find("."+this.PV).remove(),this._startPrepareForPlayer(e,t)}),this))},_startPrepareForPlayer:function(e,t){this._unloadVideoPlayer(t.activeFrame.$stageFrame.parent(),t,!1),this._checkForVideo(e,t,t.activeFrame.i),this._checkForVideo(e,t,t.activeFrame.i-1),this._checkForVideo(e,t,t.activeFrame.i+1)},_checkForVideo:function(e,t,i){var a=this.options.videoData[i-1],o=t.data[i-1];if(o){if(!o.type&&this._setItemType(o,i-1),"image"===o.type)return o.$navThumbFrame&&o.$navThumbFrame.removeClass(this.TI),void this._hideCloseVideo();o.$navThumbFrame&&"video"===o.type&&!o.$navThumbFrame.hasClass(this.TI)&&o.$navThumbFrame.addClass(this.TI),o=o.$stageFrame}o&&a&&a.mediaType===this.VID&&($(t.activeFrame.$stageFrame).removeAttr("href"),this._prepareForVideoContainer(o,a,t,i)),this.isFullscreen&&this.fotoramaItem.data("fotorama").activeFrame.i===i&&this.fotoramaItem.data("fotorama").activeFrame.$stageFrame[0].click()},_prepareForVideoContainer:function(e,t,i,a){e.addClass("fotorama-video-container").addClass(this.VU),this._createVideoContainer(t,e),this._setVideoEvent(e,this.PV,i,a)},_createVideoContainer:function(e,t){var i;i=this.options.videoSettings[0],t.find("."+this.PV).remove(),t.append('<div class="'+this.PV+'" data-related="'+i.showRelated+'" data-loop="'+i.videoAutoRestart+'" data-type="'+e.provider+'" data-code="'+e.id+'"  data-youtubenocookie="'+e.useYoutubeNocookie+'" data-width="100%" data-height="100%"></div>')},_setVideoEvent:function(e,t,i,a){e.find(".magnify-lens").remove(),e.off("click tap",$.proxy(this._clickHandler,this)).on("click tap",$.proxy(this._clickHandler,this)),this._handleBaseVideo(i,a)},_hideVideoArrows:function(){var e=$("."+this.FTAR);e.removeClass("fotorama__arr--shown"),e.removeClass("fotorama__arr--hidden")},_showLoader:function(){this.fotoramaItem.find("."+this.fotoramaSpinner).addClass(this.fotoramaSpinnerShow),this.fotoramaItem.data("fotorama").activeFrame.$stageFrame.addClass(this.PVLOADING)},_hideLoader:function(){this.fotoramaItem.find("."+this.fotoramaSpinner).removeClass(this.fotoramaSpinnerShow),this.fotoramaItem.data("fotorama").activeFrame.$stageFrame.removeClass(this.PVLOADING)},_clickHandler:function(e){var t;$(e.target).hasClass(this.VU)&&0===$(e.target).find("iframe").length&&($(e.target).removeClass(this.VU),t=$(e.target).find("."+this.PV).data("type"),this.vimeoJSFrameworkLoaded&&t===this.VI?$(e.target).find("."+this.PV).productVideoLoader():t===this.VI?(this._showLoader(),this.onVimeoJSFramework=function(){$(e.target).find("."+this.PV).productVideoLoader(),this._hideLoader()}.bind(this)):$(e.target).find("."+this.PV).productVideoLoader(),$("."+this.FTAR).addClass(this.isFullscreen?"fotorama__arr--shown":"fotorama__arr--hidden"))},_handleBaseVideo:function(e,t){var i,a=this.options.videoData,o=e.activeIndex,n=parseInt(t,10),r=a[o];this.Base&&r&&1===n&&$(window).width()>this.MobileMaxWidth&&(this.options.videoData[e.activeIndex].provider===this.VI?i=setInterval($.proxy((function(){window.Froogaloop&&(clearInterval(i),e.requestFullScreen(),this.fotoramaItem.data("fotorama").activeFrame.$stageFrame[0].click(),this.Base=!1)}),this),50):setTimeout($.proxy((function(){e.requestFullScreen(),this.fotoramaItem.data("fotorama").activeFrame.$stageFrame[0].click(),this.Base=!1}),this),50))},_unloadVideoPlayer:function(e,t,i){var a=this;e&&(e.find("."+this.PVLOADED).removeClass(this.PVLOADED),this._hideLoader(),e.find("."+this.PV).each((function(){var e,o,n,r=$(this).parent(),s=$(this).find("iframe");0!==s.length&&((o=t.activeFrame.$stageFrame.index())!==(n=r.index())||i)&&(o!==n&&i||(s.remove(),e=$(this).clone(),$(this).remove(),r.append(e),r.addClass(a.VU),a._hideCloseVideo(),a._hideVideoArrows(),a.isFullscreen&&!a.fotoramaItem.data("fotorama").options.fullscreen.arrows&&($("."+a.FTAR+"--prev").is(":focus")||$("."+a.FTAR+"--next").is(":focus"))&&$(a.FTCF).focus()))})))}}),$.mage.AddFotoramaVideoEvents})),define("Magento_Catalog/js/price-utils",["jquery","underscore"],(function($,e){"use strict";var t={requiredPrecision:2,integerRequired:1,decimalSymbol:",",groupSymbol:",",groupLength:","};function i(e,t){return new Array(t+1).join(e)}return{formatPrice:function(a,o,n){var r,s,l,u,d,c,m,h,f,p,g,v="";return o=e.extend(t,o),r=isNaN(o.requiredPrecision=Math.abs(o.requiredPrecision))?2:o.requiredPrecision,s=isNaN(o.integerRequired=Math.abs(o.integerRequired))?1:o.integerRequired,l=void 0===o.decimalSymbol?",":o.decimalSymbol,u=void 0===o.groupSymbol?".":o.groupSymbol,d=void 0===o.groupLength?3:o.groupLength,void 0===n||!0===n?v=a<0?"-":n?"+":"":!1===n&&(v=""),c=(c=o.pattern||"%s").indexOf("{sign}")<0?v+c:c.replace("{sign}",v),h=(m=i("0",(m=parseInt(a=Number(Math.round(Math.abs(+a||0)+"e+"+r)+"e-"+r),10)+"").length<s?s-m.length:0)+m).length>d?m.length%d:0,f=new RegExp("(\\d{"+d+"})(?=\\d)","g"),g=Number(Math.round(Math.abs(a-m)+"e+"+r)+"e-"+r),p=(h?m.substr(0,h)+u:"")+m.substr(h).replace(f,"$1"+u)+(r?l+g.toFixed(r).replace(/-/,0).slice(2):""),c.replace("%s",p).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},deepClone:function(e){return JSON.parse(JSON.stringify(e))},strPad:i,findOptionId:function(e){var t,i,a;return e?(i=(t=-1!==(a=$(e).attr("name")).indexOf("[")?/\[([^\]]+)?\]/:/_([^\]]+)?_/).exec(a)&&t.exec(a)[1])||void 0:i}}})),define("Ruroc_Upsells/js/visor-upsell",["uiComponent","uiRegistry","ko","jquery","underscore","Magento_Catalog/js/price-utils","Magento_Catalog/js/product/delivery-dates"],(function(e,t,i,$,a,o){"use strict";return e.extend({defaults:{items:i.observableArray()},initialize:function(e,i){this._super();var a=this;return this.element=$(i),this.item=this.element.find(".visor-upsell-list-item"),this.grandTotal=this.element.find(".visor-upsell-heading-price-grand-total"),this.total=this.element.find(".visor-upsell-heading-price-total"),this.deliveryMessage=t.get("delivery-message"),this.deliveryMessage&&this.deliveryMessage.isCrossFulfilled.subscribe((function(e){e&&(a.element.find("input").prop("checked",!1),a.items([])),a.element.toggle(!e)})),this.setupItemListener(),this.setupPriceListener(),this},setupItemListener:function(){var e=this;this.item.not(".included").on("click",(function(t){$(t.target).hasClass("open")||e.updateSelectedItems($(this))}))},setupPriceListener:function(){var e=this;this.grandTotal.text("+ "+e.getFormattedGrandTotal()),this.items.subscribe((function(){e.grandTotal.text("+ "+e.getFormattedGrandTotal()),e.total.text(e.getFormattedTotalValue()),e.total.toggle(e.isEligibleForDiscount())}))},getItemValues:function(){var e=this;return a.map(this.items(),(function(t){return e.element.find("input#"+t).data("price")}))},getTotalItemsValue:function(){return a.reduce(this.getItemValues(),(function(e,t){return e+t}))},isEligibleForDiscount:function(){return this.getNumberOfItems()>=3},getNumberOfItems:function(){return this.items().length},getFormattedValue:function(e){return o.formatPrice(e)},getFormattedTotalValue:function(){return this.getFormattedValue(this.getTotalItemsValue())},getFormattedGrandTotal:function(){return this.getFormattedValue(this.getTotalItemsValue()-this.getDiscountValue())},getDiscountedItemsValue:function(){var e=Math.floor(this.getNumberOfItems()/3),t=a.sortBy(this.getItemValues(),(function(e){return e}));return a.reduce(a.first(t,e),(function(e,t){return e+t}))},getDiscountValue:function(){return this.isEligibleForDiscount()?this.getDiscountedItemsValue():0},updateSelectedItems:function(e){var t=$(e),i=t.data("id"),o=t.find("input"),n=this.items();return o.prop("checked",!o.prop("checked")),a.contains(n,i)?this.items.remove(i):this.items.push(i),!0}})})),define("Astound_Affirm/js/model/aslowas",["jquery","mage/translate"],(function($,e){"use strict";var t;return{options:{},aSLowAsElement:"affirm-as-low-as",getAsLowAsElement:function(){return this.options.aSLowAsElement?this.options.aSLowAsElement:this.aSLowAsElement},process:function(e,i){var a,o,n;t=this,a=Number(e.replace(/[^0-9\.]+/g,"")),i.currency_rate&&(a=(a/=i.currency_rate).toFixed(2)),o=100*a,i&&(t.options=i),n={element_id:i.element_id?i.element_id:"",color_id:i.color_id?i.color_id:"",amount:o},o>50?t.processAsLowAs(n):t.hideAsLowAs(n)},hideAsLowAs:function(e){if(e.element_id){var i=document.getElementById(e.element_id);i&&(i.style.visibility="hidden")}else{var a=document.getElementsByClassName(t.getAsLowAsElement());$.each(a,(function(e,t){t["innerText"in t?"innerText":"textContent"]="",t.style.visibility="hidden"}))}},processAsLowAs:function(e){var t=this;affirm.ui.ready((function(){e.amount&&(t.updateAffirmAsLowAs(e.amount)?(e.color_id&&document.getElementById(e.element_id).setAttribute("data-affirm-color",e.color_id),document.getElementById(e.element_id).setAttribute("data-amount",e.amount)):t.hideAsLowAs(e))}))},updateAffirmAsLowAs:function(e){return!(null==e||e>175e4||e<5e3)&&(!(this.options.min_order_total&&e<100*this.options.min_order_total||this.options.max_order_total&&e>100*this.options.max_order_total)&&(e&&(this.options.amount=e),!0))},loadScript:function(e){var t=e.public_api_key,i=e.script;!function(e,t,i,a,o,n,r){var s,l=e[i]||{},u=document.createElement(n),d=document.getElementsByTagName(n)[0],c=function(e,t,i){return function(){e[t]._.push([i,arguments])}};for(l[a]=c(l,a,"set"),s=l[a],l[o]={},l[o]._=[],s._=[],l[o][r]=c(l,o,r),o=0,r="set add save post open empty reset on off trigger ready setProduct".split(" ");o<r.length;o++)s[r[o]]=c(l,a,r[o]);for(o=0,r=["get","token","url","items"];o<r.length;o++)s[r[o]]=function(){};u.async=!0,u.src=t[n],d.parentNode.insertBefore(u,d),delete t[n],s(t),e[i]=l}(window,{public_api_key:t,script:i},"affirm","checkout","ui","script","ready")},processBackordersVisibility:function(e){t=this;var i=!0;$.each(e,(function(e,a){var o=!0,n=!1,r=0;if($.each(a,(function(t,i){if("backorders"==t)n=i;else{var a=$('[attribute-id="'+t+'"]');if(r=parseInt(e),!a||a.attr("option-selected")!=i)return o=!1,r=0,!1}})),o&&r>0)return n?(t.updatePromoBlocksVisibility("hidden"),i=!1):t.updatePromoBlocksVisibility("visible"),!1})),i&&t.updatePromoBlocksVisibility("visible")},updatePromoBlocksVisibility:function(e){var i=document.getElementsByClassName(t.getAsLowAsElement());i&&$.each(i,(function(t,i){i.style.visibility=e}));var a=document.getElementsByClassName("affirm-promo");return a[0]&&(a[0].style.visibility=e),!0}}})),define("Astound_Affirm/js/affirmPixel",["jquery","Astound_Affirm/js/model/aslowas"],(function($,e){"use strict";var t;return $.widget("mage.affirmPixel",{options:{},_create:function(){function i(e){affirm.ui.ready((function(){e.method&&e.parameter&&affirm.analytics[e.method](e.parameter[0],e.parameter[1])}))}t=this,"undefined"==typeof affirm?$.when(e.loadScript(t.options.pixelConfig)).done((function(){i(t.options)})):i(t.options)}}),$.mage.affirmPixel})),define("magnifier/magnifier",require.s.contexts._.config.shim["magnifier/magnifier"]&&require.s.contexts._.config.shim["magnifier/magnifier"].deps||[],function(){return function($){function e(e,t){var i,a=t||{},o=$(e),n=this,r=t.largeWrapper||".magnifier-preview",s=$(r);curThumb=null,magnifierOptions={x:0,y:0,w:0,h:0,lensW:0,lensH:0,lensBgX:0,lensBgY:0,largeW:0,largeH:0,largeL:0,largeT:0,zoom:2,zoomMin:1.1,zoomMax:5,mode:"outside",eventType:"click",status:0,zoomAttached:!1,zoomable:void 0!==a.zoomable&&a.zoomable,onthumbenter:void 0!==a.onthumbenter?a.onthumbenter:null,onthumbmove:void 0!==a.onthumbmove?a.onthumbmove:null,onthumbleave:void 0!==a.onthumbleave?a.onthumbleave:null,onzoom:void 0!==a.onzoom?a.onzoom:null},pos={t:0,l:0,x:0,y:0},gId=0,status=0,curIdx="",curLens=null,curLarge=null,lensbg=void 0===a.bg||a.lensbg,gZoom=void 0!==a.zoom?a.zoom:magnifierOptions.zoom,gZoomMin=void 0!==a.zoomMin?a.zoomMin:magnifierOptions.zoomMin,gZoomMax=void 0!==a.zoomMax?a.zoomMax:magnifierOptions.zoomMax,gMode=a.mode||magnifierOptions.mode,gEventType=a.eventType||magnifierOptions.eventType,data={},inBounds=!1,isOverThumb=!1,rate=1,paddingX=0,paddingY=0,enabled=!0,showWrapper=!0;var l="magnify-hidden",u="magnify-opaque";function d(e){if("string"==typeof e){if("true"===e)return!0;if("false"===e)return!1;console.warn("Wrong type: can't be transformed to Boolean")}else if("boolean"==typeof e)return e}function c(e,t,a,n){var r,s=o.find(".magnify-lens");1===data[e].status?(r=$('<div class="magnifier-loader-text"></div>'),s.className="magnifier-loader magnify-hidden",r.html("Loading..."),s.html("").append(r)):2===data[e].status&&(s.addClass(l),s.html(""),a.id=e+"-large",a.style.width=data[e].largeImgInMagnifyLensWidth+"px",a.style.height=data[e].largeImgInMagnifyLensHeight+"px",a.className="magnifier-large magnify-hidden","inside"===data[e].mode?s.append(a):n.html("").append(a)),data[e].lensH=data[e].lensH>i.height()?i.height():data[e].lensH,0===Math.round(data[e].lensW)?s.css("display","none"):s.css({width:Math.round(data[e].lensW)+"px",height:Math.round(data[e].lensH)+"px",display:""})}function m(){var e,t,i=pos.x-magnifierOptions.x,a=pos.y-magnifierOptions.y;inBounds=!(i<0||a<0||i>magnifierOptions.w||a>magnifierOptions.h),t=i-magnifierOptions.lensW/2,e=a-magnifierOptions.lensH/2,i<magnifierOptions.lensW/2&&(t=0),a<magnifierOptions.lensH/2&&(e=0),i-magnifierOptions.w+Math.ceil(magnifierOptions.lensW/2)>0&&(t=magnifierOptions.w-Math.ceil(magnifierOptions.lensW+2)),a-magnifierOptions.h+Math.ceil(magnifierOptions.lensH/2)>0&&(e=magnifierOptions.h-Math.ceil(magnifierOptions.lensH)),pos.l=t,pos.t=e,magnifierOptions.lensBgX=pos.l,magnifierOptions.lensBgY=pos.t,"inside"===magnifierOptions.mode?(magnifierOptions.largeL=Math.round(i*(magnifierOptions.zoom-magnifierOptions.lensW/magnifierOptions.w)),magnifierOptions.largeT=Math.round(a*(magnifierOptions.zoom-magnifierOptions.lensH/magnifierOptions.h))):(magnifierOptions.largeL=Math.round(magnifierOptions.lensBgX*magnifierOptions.zoom*(magnifierOptions.largeWrapperW/magnifierOptions.w)),magnifierOptions.largeT=Math.round(magnifierOptions.lensBgY*magnifierOptions.zoom*(magnifierOptions.largeWrapperH/magnifierOptions.h)))}function h(){d(enabled)&&(magnifierOptions=data[curIdx],curLens=o.find(".magnify-lens"),2===magnifierOptions.status?(curLens.removeClass(u),curLarge=$("#"+curIdx+"-large"),curLarge.removeClass(l)):1===magnifierOptions.status&&(curLens.className="magnifier-loader"))}function f(){if(magnifierOptions.status>0){var e=magnifierOptions.onthumbleave;null!==e&&e({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y}),curLens.hasClass(l)||(curLens.addClass(l),null!==curLarge&&curLarge.addClass(l))}}function p(){if(d(enabled)){if(status!==magnifierOptions.status&&h(),magnifierOptions.status>0){curThumb.className=magnifierOptions.thumbCssClass+" magnify-opaque",1===magnifierOptions.status?curLens.className="magnifier-loader":2===magnifierOptions.status&&(curLens.removeClass(l),curLarge.removeClass(l),curLarge.css({left:"-"+magnifierOptions.largeL+"px",top:"-"+magnifierOptions.largeT+"px"}));pos.t=pos.t<=0?0:pos.t-2,curLens.css({left:pos.l+paddingX+"px",top:pos.t+paddingY+"px"}),lensbg?curLens.css({"background-color":"rgba(f,f,f,.5)"}):curLens.get(0).style.backgroundPosition="-"+magnifierOptions.lensBgX+"px -"+magnifierOptions.lensBgY+"px";var e=magnifierOptions.onthumbmove;null!==e&&e({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y})}status=magnifierOptions.status}}function g(e,t){var i=e.getBoundingClientRect(),a=0,o=0;t.x=Math.round(i.left),t.y=Math.round(i.top),t.w=Math.round(i.right-t.x),t.h=Math.round(i.bottom-t.y),"inside"===t.mode?(a=t.w,o=t.h):(a=t.largeWrapperW,o=t.largeWrapperH),t.largeImgInMagnifyLensWidth=Math.round(t.zoom*a),t.largeImgInMagnifyLensHeight=Math.round(t.zoom*o),t.lensW=Math.round(t.w/t.zoom),t.lensH=Math.round(t.h/t.zoom)}function v(e,t){var o={};if(void 0===t.thumb)return!1;if((i=e.find(t.thumb)).length){for(var r in t)o[r]=t[r];o.thumb=i,enabled=o.enabled,d(enabled)?(s.show().css("display",""),s.addClass(l),function(e){if(void 0!==data[e.thumb.id])return curThumb=e.thumb,!1;var t,i=new Image,o=new Image,n=e.thumb,r=n.get(0),s=r.id,l=$(e.largeWrapper),u=e.zoom||r.getAttribute("data-zoom")||gZoom,d=e.zoomMin||gZoomMin,m=e.zoomMax||gZoomMax,h=e.mode||r.getAttribute("data-mode")||gMode,p=e.eventType||r.getAttribute("data-eventType")||gEventType,v=void 0!==e.onthumbenter?e.onthumbenter:magnifierOptions.onthumbenter,_=void 0!==e.onthumbleave?e.onthumbleave:magnifierOptions.onthumbleave,y=void 0!==e.onthumbmove?e.onthumbmove:magnifierOptions.onthumbmove;t=n.data("original")||a.full||n.attr("src"),""===r.id&&(s=r.id="magnifier-item-"+gId,gId+=1);(function(e){if($(e).siblings(".magnify-lens").length)return!1;var t=$('<div class="magnify-lens magnify-hidden" data-gallery-role="magnifier-zoom"></div>');$(e).parent().append(t)})(r),e.width&&l.width(e.width);e.height&&l.height(e.height);if(e.top){if("function"==typeof e.top)var b=e.top()+"px";else b=e.top+"px";l.length&&(l[0].style.top=b.replace("%px","%"))}if(e.left){if("function"==typeof e.left)var x=e.left()+"px";else x=e.left+"px";l.length&&(l[0].style.left=x.replace("%px","%"))}data[s]={zoom:u,zoomMin:d,zoomMax:m,mode:h,eventType:p,thumbCssClass:r.className,zoomAttached:!1,status:0,largeUrl:t,largeWrapperId:"outside"===h?l.attr("id"):null,largeWrapperW:"outside"===h?l.width():null,largeWrapperH:"outside"===h?l.height():null,onthumbenter:v,onthumbleave:_,onthumbmove:y},paddingX=(n.parent().width()-n.width())/2,paddingY=(n.parent().height()-n.height())/2,showWrapper=!1,$(i).on("load",(function(){data[s].status=1,$(o).on("load",(function(){(o.width>l.width()||o.height>l.height())&&(showWrapper=!0,function(e,t){switch(e){case"hover":!function(e){$(e).on("mouseover",(function(e){showWrapper&&(0!==magnifierOptions.status&&f(),w(e),isOverThumb=inBounds)})).trigger("mouseover")}(t);break;case"click":!function(e){$(e).on("click",(function(e){showWrapper&&(isOverThumb||(0!==magnifierOptions.status&&f(),w(e),isOverThumb=!0))}))}(t)}}(p,r),data[s].status=2,o.width>o.height?data[s].zoom=o.width/l.width():data[s].zoom=o.height/l.height(),g(r,data[s]),c(s,0,o,l))})),o.src=data[s].largeUrl})),i.src=r.src}(o)):s.empty().hide()}return n}function w(e){var t=e.target;curIdx=t.id,curThumb=t,h(),g(curThumb,magnifierOptions),pos.x=e.clientX,pos.y=e.clientY,m(),p();var i=magnifierOptions.onthumbenter;null!==i&&i({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y})}n.update=function(){c()},n.init=function(){v(o,t)},$(window).on("scroll",(function(){null!==curThumb&&g(curThumb,magnifierOptions)})),$(window).resize((function(){v(o,a)})),o.on("mousemove",(function(e){pos.x=e.clientX,pos.y=e.clientY,m(),"hover"===gEventType&&(isOverThumb=inBounds),inBounds&&isOverThumb&&("outside"===gMode&&s.removeClass(l),p())})),o.on("mouseleave",(function(){f(),isOverThumb=!1,s.addClass(l)})),v(o,a)}$.fn.magnify=function(t){"use strict";return new e($(this),t)}}(jQuery),require.s.contexts._.config.shim["magnifier/magnifier"]&&require.s.contexts._.config.shim["magnifier/magnifier"].exportsFn&&require.s.contexts._.config.shim["magnifier/magnifier"].exportsFn()}.bind(window)),define("magnifier/magnify",["jquery","underscore","magnifier/magnifier"],(function($,e){"use strict";return function(t,i){var a,o,n,r,s,l="ontouchstart"in document.documentElement,u='[data-gallery-role="gallery"]',d='[data-gallery-role="magnifier-zoom"]',c='[data-gallery-role="fotorama__zoom-in"]',m='[data-gallery-role="fotorama__zoom-out"]',h='[data-gallery-role="stage-shaft"] [data-active="true"] .fotorama__img--full',f="fotorama__img--draggable",p="fotorama__img--zoommable",g="zoom-in-loaded",v="zoom-out-loaded",w="fotorama__zoom-in--disabled",_="fotorama__zoom-out--disabled",y=0,b=!1,x=!0;function C(e){return{rw:e.naturalWidth,rh:e.naturalHeight}}function k(e){var t,i,a=e.height(),o=e.width(),n=e.parent().height(),r=e.parent().width();(o>r||a>n)&&(o/a<r/n?(t=n,i=o*(n/a)):(i=r,t=a*r/o),e.css({"min-width":i,"min-height":t}))}function F(e,t){t?e.css({"min-width":e.width(),"min-height":e.height(),width:e.width(),height:e.height()}).addClass(p):(e.css({width:"",height:"",top:"",left:"",right:"",bottom:""}).removeClass(p),k(e))}function S(e){x=!0,b=n=!1,e.hasClass(f)&&e.removeClass(f),F(e,!1)}function M(e){e?($(c).addClass(w),$(m).addClass(_)):($(c).removeClass(w),$(m).removeClass(_))}function T(e,t,i){var a=e.attr("src");!a||t||i?M(!0):function(e,t){var i=new Image;i.onload=function(){this.height>t.parent().height()||this.width>t.parent().width()?M(!1):M(!0)},i.src=e}(a,e)}function P(e,t){var i,a,o,n,r;e.data.$image&&e.data.$image.length&&(i=C($(h)[0]),a=e.data.$image.parent().width(),o=e.data.$image.parent().height(),n=a>=i.rw&&o>=i.rh,r=a>e.data.$image.width()&&o>e.data.$image.height(),T(e.data.$image,l,z(e.data.fotorama.activeFrame.$stageFrame)),k(e.data.$image),(e.data.$image.hasClass(p)&&!b||n||r)&&S(e.data.$image),n||I())}function L(e,t,i,a){var o,r,s,l,d,c,m,h;$(u).data("fotorama").fullScreen&&(!0,r=(o=e.parent()).width(),s=o.height(),d=e.position().top,c=e.position().left,h=e.width()/e.height(),t.height=isNaN(t.height)?t.width/h:t.height,t.width=isNaN(t.width)?t.height*h:t.width,d=t.height>=s?function(e,t,i,a,o){var r;return parseInt(e.css("marginTop"))||parseInt(e.css("marginLeft"))?r=(r=(r=n?t-i/4:0)<o-a?o-a:r)>a-o?a-o:r:(r=(r=(r=t+i/2)<o-a?o-a:r)>0?0:r,!n&&i<0&&(r=r<(o-a)/2?(o-a)/2:r)),r}(e,d,a,t.height,s):0,c=t.width>=r?function(e,t,i,a){var o;return o=(o=(o=e+t/2)<a-i?a-i:o)>0?0:o,!n&&t<0&&(o=o<(a-i)/2?(a-i)/2:o),o}(c,i,t.width,r):0,m=n&&c<(r-t.width)/2?0:c,n?0:d,l=$.extend(t,{top:d,left:c,right:m}),e.css(l))}function I(){var t,i=$("a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]").not("[tabindex=-1], [disabled], :hidden"),a=$(u).data("fotorama"),o=$(":focus");a.fullScreen&&(i.each((function(e){$(this).is(o)&&(t=e)})),a.setOptions({swipe:!b,keyboard:!b}),e.isNumber(t)&&i.eq(t).focus())}function E(e,i,a){var o,n,r,s,u,d,m,f,g,v={};return!x||!l&&$(c).hasClass(w)||(n=C((o=$(h))[0]),g=(r=o.width())/(s=o.height()),b=!0,I(),o.hasClass(p)||F(o,!0),e.preventDefault(),r>=s?((m=r+(u=i||Math.ceil(r*parseFloat(t.magnifierOpts.fullscreenzoom)/100)))>=n.rw&&(m=n.rw,u=i||m-r,x=!1),f=m/g,d=a||f-s):((f=s+(d=a||Math.ceil(s*parseFloat(t.magnifierOpts.fullscreenzoom)/100)))>=n.rh&&(f=n.rh,d=a||f-s,x=!1),m=f*g,u=i||m-r),r>=s&&r!==n.rw?L(o,v=$.extend(v,{width:m,height:"auto"}),-u,-d):r<s&&s!==n.rh&&L(o,v=$.extend(v,{width:"auto",height:f}),-u,-d)),!1}function V(e,i,a){var o,r,s,u,d,c,f,p,g,v,w,y;return!b||!l&&$(m).hasClass(_)||(x=!0,o=$(h),d=o.parent().width(),c=o.parent().height(),f=o.width(),p=o.height(),w=f/p,e.preventDefault(),f>=p?(g=i||Math.ceil(f*parseFloat(t.magnifierOpts.fullscreenzoom)/100),s=(r=f-g)/w,v=a||p-s):(v=a||Math.ceil(p*parseFloat(t.magnifierOpts.fullscreenzoom)/100),r=(s=p-v)*w,g=i||f-r),y=function(){w>d/c?(g=f-(r=d),v=p-(s=r/w),u={width:r,height:"auto"}):(v=p-(s=c),g=f-(r=s*w),u={width:"auto",height:s}),L(o,u,g,v)},f>=p?r>d||s>c?L(o,u={width:r,height:"auto"},g,v):(b=n=!1,I(),y()):s>c||r>d?L(o,u={width:"auto",height:s},g,v):(b=n=!1,I(),y())),!1}function O(t){var i,o,s,d,c,m,p,g=!1,v=$(u),w=$(h,v),_=$('[data-gallery-role="stage-shaft"] [data-active="true"]'),k=v.data("fotorama");function F(e){return parseInt(e.get(0).style.top)}function S(t,i,a){var o=+d+i,l=+s+t,c=w.width()/10+20;return n=!0,w.offset().left===_.offset().left+_.width()-w.width()&&39===a.keyCode||r-1<_.offset().left+_.width()-w.width()&&t<0&&e.isNumber(r)&&("mousemove"===a.type||"touchmove"===a.type||"pointermove"===a.type||"MSPointerMove"===a.type)?(r=null,void m(">")):w.offset().left===_.offset().left&&0!==t&&37===a.keyCode||r===_.offset().left&&t>0&&("mousemove"===a.type||"touchmove"===a.type||"pointermove"===a.type||"MSPointerMove"===a.type)?(r=null,void m("<")):(w.height()>_.height()&&(_.height()>w.height()+o?w.css("top",_.height()-w.height()):(i=i<(o=w.height()-F(w)-_.height())?i:o,w.css("top",F(w)+i))),w.width()>_.width()?(l=_.offset().left+_.width()>l+w.width()?_.offset().left+_.width()-w.width():_.offset().left<l?_.offset().left:l,w.offset({left:l}),w.css("right","")):Math.abs(i)<1&&b&&"mousemove"!==a.type&&"touchmove"!==a.type&&"pointermove"!==a.type&&"MSPointerMove"!==a.type&&(t<0?$(u).data("fotorama").show(">"):$(u).data("fotorama").show("<")),void(w.width()<=_.width()&&b&&("mousemove"===a.type||"touchmove"===a.type||"pointermove"===a.type||"MSPointerMove"===a.type)&&Math.abs(t)>Math.abs(i)&&Math.abs(t)>c&&m(t<0?">":"<")))}function M(e){var t,i=C(w[0]);i.rh<w.parent().height()&&i.rw<w.parent().width()||(t=i.rw/i.rh,x?E(e,i.rw-w.width(),i.rh-w.height()):t>_.width()/_.height()?V(e,i.rw-_.width(),i.rw/t):V(e,i.rw*t,i.rh-_.height()))}function L(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))}m=e.throttle((function(e){$(u).data("fotorama").show(e)}),500,{trailing:!1}),l?(w.off("tap"),w.on("tap",(function(e){0===e.originalEvent.originalEvent.touches.length&&function(e){var t=(new Date).getTime()-y;t<400&&t>0?(!1,y=0,M(e)):y=(new Date).getTime()}(e)}))):(w.unbind("dblclick"),w.dblclick(M)),k.fullScreen&&T(w,l,z(t.activeFrame.$stageFrame)),w.off(l?"touchstart":"pointerdown mousedown MSPointerDown"),w.on(l?"touchstart":"pointerdown mousedown MSPointerDown",(function(e){e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2?(e.preventDefault(),p=L(e.originalEvent),g=!1,w.hasClass(f)&&w.removeClass(f)):k.fullScreen&&(d=F(w),s=w.offset().left,l&&(c=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],e.clientX=c.pageX,e.clientY=c.pageY),i=e.clientX||e.originalEvent.clientX,o=e.clientY||e.originalEvent.clientY,g=!0),w.offset()&&w.width()>_.width()&&(r=w.offset().left)})),w.off(l?"touchmove":"mousemove pointermove MSPointerMove"),w.on(l?"touchmove":"mousemove pointermove MSPointerMove",(function(e){if(e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();var t=L(e.originalEvent);w.hasClass(f)&&w.removeClass(f),t<p?(V(e),p=t):t>p&&(E(e),p=t)}else{var a,n;k.fullScreen&&g&&(b&&!w.hasClass(f)&&w.addClass(f),a=e.clientX||e.originalEvent.clientX,n=e.clientY||e.originalEvent.clientY,e.preventDefault(),l&&(a=(c=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX,n=c.pageY),b&&(d=F($(h,v)),S(a-i,n-o,e)))}})),w.off("transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd "),w.on("transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd",(function(){!1})),a&&$(document).unbind("keydown",a),a=function(e){var t=$(":focus"),i=$(u).data("fotorama").fullScreen,a=function(){s=$(h,v).offset().left,d=F($(h,v))};!t.attr("data-gallery-role")&&t.length||!b||(i&&(s=$(h,$(u)).offset().left,d=F($(h,$(u)))),39===e.keyCode&&i&&(a(),S(-40,0,e)),38===e.keyCode&&i&&(a(),S(0,40,e)),37===e.keyCode&&i&&(a(),S(40,0,e)),40===e.keyCode&&i&&(e.preventDefault(),a(),S(0,-40,e))),27===e.keyCode&&i&&b&&$(u).data("fotorama").cancelFullScreen()},$(document).keydown(a),$(document).on(l?"touchend":"mouseup pointerup MSPointerUp",(function(e){k.fullScreen&&(w.offset()&&w.width()>_.width()&&(r=w.offset().left),g=!1,w.removeClass(f))})),$(window).off("resize",P),$(window).on("resize",{$image:w,fotorama:t},P)}function z(e){return e.hasClass("fotorama-video-container")}return void 0!==(s=document.documentElement.style).transition||void 0!==s.WebkitTransition||void 0!==s.MozTransition||void 0!==s.MsTransition||s.OTransition,o=function(){$('[data-gallery-role="magnifier"]').empty().hide(),$(d).remove()},t.magnifierOpts.enabled&&$(i).on("pointerdown mousedown MSPointerDown",(function(e){var t=[e.pageX,e.pageY];$(i).on("mousemove pointermove MSPointerMove",(function(e){navigator.msPointerEnabled?o():function(e,t){var i=[e.pageX,e.pageY],a="arrow"===$(e.target).data("gallery-role"),n=t[0]===i[0]&&t[1]===i[1],r=$(e.target).parent().data("active");(a||r&&!n)&&o()}(e,t)})),$(document).on("mouseup pointerup MSPointerUp",(function(){$(i).off("mousemove pointermove MSPointerMove")}))})),$.extend(t.magnifierOpts,{zoomable:!1,thumb:".fotorama__img",largeWrapper:'[data-gallery-role="magnifier"]',height:t.magnifierOpts.height||function(){return $('[data-active="true"]').height()},width:t.magnifierOpts.width||function(){var e=$(u).parent().parent();return e.parent().width()-e.width()-20},left:t.magnifierOpts.left||function(){return $(u).offset().left+$(u).width()+20},top:t.magnifierOpts.top||function(){return $(u).offset().top}}),$(i).on("fotorama:load fotorama:showend fotorama:fullscreenexit fotorama:ready",(function(e,i){var a=$(u).data("fotorama").activeFrame.$stageFrame;a.find(d).length||(o(),t.magnifierOpts&&(t.magnifierOpts.large=$(u).data("fotorama").activeFrame.img,t.magnifierOpts.full=i.data[i.activeIndex].original,!z(a)&&$(a).magnify(t.magnifierOpts)))})),$(i).on("gallery:loaded",(function(t){var a;$(i).find(u).on("fotorama:ready",(function(e,t){var i=$(c),a=$(m);i.hasClass(g)||(i.on("click touchstart",E),i.on("mousedown",(function(e){e.stopPropagation()})),i.keyup((function(e){13===e.keyCode&&E(e)})),$(window).keyup((function(e){(107===e.keyCode||t.fullscreen)&&E(e)})),i.addClass(g)),a.hasClass(v)||(a.on("click touchstart",V),a.on("mousedown",(function(e){e.stopPropagation()})),a.keyup((function(e){13===e.keyCode&&V(e)})),$(window).keyup((function(e){(109===e.keyCode||t.fullscreen)&&V(e)})),a.addClass(v))})).on("fotorama:fullscreenenter fotorama:showend",(function(e,t){o(),$(h).is(a)||S($(h)),O(t),function(e,t,i){var a=t.activeFrame.$stageFrame,o=a.get(0);function n(e){var t=e.deltaY||e.wheelDelta,i=e||window.event;$(u).data("fotorama").fullScreen&&(e.deltaY?t>0?V(i):E(i):t>0?E(i):V(i),e.preventDefault?e.preventDefault():e.returnValue=!1)}a.hasClass("magnify-wheel-loaded")||o&&o.addEventListener&&("onwheel"in document?o.addEventListener("wheel",n):"onmousewheel"in document?o.addEventListener("mousewheel",n):o.addEventListener("MozMousePixelScroll",n),a.addClass("magnify-wheel-loaded"))}(0,t),a&&(k(a),$(h).is(a)||S(a)),I()})).on("fotorama:load",(function(e,t){$(u).data("fotorama").fullScreen&&T($(h),l,z(t.activeFrame.$stageFrame)),O(t)})).on("fotorama:show",(function(t,i){a=e.clone($(h)),o()})).on("fotorama:fullscreenexit",(function(e,t){S($(h)),o(),M(!0)}))})),t}})),define("Magento_Catalog/js/product/view/provider",["underscore","uiElement","Magento_Catalog/js/product/storage/storage-service"],(function(e,t,i){"use strict";return t.extend({defaults:{identifiersConfig:{namespace:"recently_viewed_product"},productStorageConfig:{namespace:"product_data_storage",updateRequestConfig:{method:"GET",dataType:"json"},className:"DataStorage"}},initialize:function(){return this._super().initIdsStorage().initDataStorage(),this},initIdsStorage:function(){return i.onStorageInit(this.identifiersConfig.namespace,this.idsStorageHandler.bind(this)),this},initDataStorage:function(){return i.onStorageInit(this.productStorageConfig.namespace,this.dataStorageHandler.bind(this)),this},dataStorageHandler:function(e){this.productStorage=e,this.productStorage.add(this.data.items)},idsStorageHandler:function(e){this.idsStorage=e,this.idsStorage.add(this.getIdentifiers())},getIdentifiers:function(){var t={},i=this.data.productCurrentScope,a="store"===i?window.checkout.storeId:"group"===i?window.checkout.storeGroupId:window.checkout.websiteId;return e.each(this.data.items,(function(e,o){t[i+"-"+a+"-"+o]={added_at:(new Date).getTime()/1e3,product_id:o,scope_id:a}}),this),t}})})),define("Fastly_Cdn/js/gallery/gallery-mixin",["mage/utils/wrapper","underscore"],(function(e,t){"use strict";return function(i){return e.wrap(i,(function(e,i,a){if(t.isUndefined(i)||t.isEmpty(i))return e(i,a);if(t.isUndefined(i.data)||t.isEmpty(i.data))return e(i,a);let o=window.devicePixelRatio;t.each(i.data,(function(e){t.isUndefined(e.fastly_srcset)||t.has(e.fastly_srcset,o)&&(e.img=e.fastly_srcset[o])})),e(i,a)}))}})),define("text!mage/gallery/gallery.html",(function(){return'\x3c!--\n/**\n * Copyright  Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n--\x3e\n<div class="fotorama-item" data-gallery-role="gallery">\n    <div data-gallery-role="fotorama__focusable-start" tabindex="-1"></div>\n    <div class="fotorama__wrap fotorama__wrap--css3 fotorama__wrap--slide fotorama__wrap--toggle-arrows">\n        <div class="fotorama__stage" data-fotorama-stage="fotorama__stage">\n            <div class="fotorama__arr fotorama__arr--prev" tabindex="0" role="button" aria-label="Previous" data-gallery-role="arrow">\n                <div class="fotorama__arr__arr"></div>\n            </div>\n            <div class="fotorama__stage__shaft" tabindex="0" data-gallery-role="stage-shaft">\n            </div>\n            <div class="fotorama__arr fotorama__arr--next fotorama__arr--disabled" tabindex="-1" role="button"\n                 aria-label="Next" data-gallery-role="arrow">\n                <div class="fotorama__arr__arr"></div>\n            </div>\n            <div class="fotorama__video-close"></div>\n            <div class="fotorama__zoom-in" data-gallery-role="fotorama__zoom-in" aria-label="Zoom in" role="button" tabindex="0"></div>\n            <div class="fotorama__zoom-out" data-gallery-role="fotorama__zoom-out" aria-label="Zoom out" role="button" tabindex="0"></div>\n            <div class="fotorama__spinner"></div>\n        </div>\n        <div class="fotorama__nav-wrap" data-gallery-role="nav-wrap">\n            <div class="fotorama__nav fotorama__nav--thumbs">\n                <div class="fotorama__fullscreen-icon" data-gallery-role="fotorama__fullscreen-icon" tabindex="0" aria-label="Exit fullscreen" role="button"></div>\n                <div class="fotorama__thumb__arr fotorama__thumb__arr--left" role="button" aria-label="Previous" data-gallery-role="arrow" tabindex = "-1">\n                    <div class="fotorama__thumb--icon"></div>\n                </div>\n                <div class="fotorama__nav__shaft">\n                    <div class="fotorama__thumb-border"></div>\n                </div>\n                <div class="fotorama__thumb__arr fotorama__thumb__arr--right" role="button" aria-label="Next" data-gallery-role="arrow" tabindex = "-1">\n                    <div class="fotorama__thumb--icon"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div data-gallery-role="fotorama__focusable-end" tabindex="-1"></div>\n</div>\n<div class="magnifier-preview" data-gallery-role="magnifier" id="preview"></div>\n'})),define("fotorama/fotorama",require.s.contexts._.config.shim["fotorama/fotorama"]&&require.s.contexts._.config.shim["fotorama/fotorama"].deps||[],function(){return fotoramaVersion="4.6.4",function(e,t,i,$,a){"use strict";var o="fotorama",n="fotorama__fullscreen",r="fotorama__wrap",s=r+"--video",l="fotorama__stage",u=l+"__frame",d="fotorama__grab",c="fotorama__arr",m=c+"--disabled",h="fotorama__nav",f=h+"-wrap",p=f+"--vertical",g=f+"--list",v=f+"--horizontal",w=h+"--dots",_=h+"--thumbs",y="fotorama__fade",b=y+"-front",x=y+"-rear",C="fotorama__shadows",k="fotorama__active",F="fotorama__select",S="fotorama--fullscreen",M="fotorama__error",T="fotorama__loading",P="fotorama__loaded",L="fotorama__grabbing",I="fotorama__img",E=I+"--full",V="fotorama__video",O=V+"-play",z="fotorama_horizontal_ratio",A="fotorama_vertical_ratio",D="fotorama__spinner",j="fotorama__spinner--show",N=$&&$.fn.jquery.split(".");if(!N||N[0]<1||1==N[0]&&N[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var X=function(e,t,i){var a,o,n={},r=t.documentElement,s="modernizr",l=t.createElement(s),u=l.style,d=" -webkit- -moz- -o- -ms- ".split(" "),c="Webkit Moz O ms",m=c.split(" "),h=c.toLowerCase().split(" "),f={},p=[],g=p.slice,v=function(e,i,a,o){var n,l,u,d,c=t.createElement("div"),m=t.body,h=m||t.createElement("body");if(parseInt(a,10))for(;a--;)(u=t.createElement("div")).id=o?o[a]:s+(a+1),c.appendChild(u);return n=["&#173;",'<style id="s',s,'">',e,"</style>"].join(""),c.id=s,(m?c:h).innerHTML+=n,h.appendChild(c),m||(h.style.background="",h.style.overflow="hidden",d=r.style.overflow,r.style.overflow="hidden",r.appendChild(h)),l=i(c,e),m?c.parentNode.removeChild(c):(h.parentNode.removeChild(h),r.style.overflow=d),!!l},w={}.hasOwnProperty;function _(e){u.cssText=e}function y(e,t){return typeof e===t}function b(e,t){for(var a in e){var o=e[a];if(!~(""+o).indexOf("-")&&u[o]!==i)return"pfx"!=t||o}return!1}function x(e,t,a){var o=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+m.join(o+" ")+o).split(" ");return y(t,"string")||y(t,"undefined")?b(n,t):function(e,t,a){for(var o in e){var n=t[e[o]];if(n!==i)return!1===a?e[o]:y(n,"function")?n.bind(a||t):n}return!1}(n=(e+" "+h.join(o+" ")+o).split(" "),t,a)}for(var C in o=y(w,"undefined")||y(w.call,"undefined")?function(e,t){return t in e&&y(e.constructor.prototype[t],"undefined")}:function(e,t){return w.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=g.call(arguments,1),a=function(){if(this instanceof a){var o=function(){};o.prototype=t.prototype;var n=new o,r=t.apply(n,i.concat(g.call(arguments)));return Object(r)===r?r:n}return t.apply(e,i.concat(g.call(arguments)))};return a}),f.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:v(["@media (",d.join("touch-enabled),("),s,")","{#modernizr{top:9px;position:absolute}}"].join(""),(function(e){i=9===e.offsetTop})),i},f.csstransforms3d=function(){var e=!!x("perspective");return e&&"webkitPerspective"in r.style&&v("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",(function(t,i){e=9===t.offsetLeft&&3===t.offsetHeight})),e},f.csstransitions=function(){return x("transition")},f)o(f,C)&&(a=C.toLowerCase(),n[a]=f[C](),p.push((n[a]?"":"no-")+a));return n.addTest=function(e,t){if("object"==typeof e)for(var a in e)o(e,a)&&n.addTest(a,e[a]);else{if(e=e.toLowerCase(),n[e]!==i)return n;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(r.className+=" "+(t?"":"no-")+e),n[e]=t}return n},_(""),l=null,n._version="2.8.3",n._prefixes=d,n._domPrefixes=h,n._cssomPrefixes=m,n.testProp=function(e){return b([e])},n.testAllProps=x,n.testStyles=v,n.prefixed=function(e,t,i){return t?x(e,t,i):x(e,"pfx")},n}(e,t),q={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},B="webkit moz o ms khtml".split(" ");if(void 0!==t.cancelFullScreen)q.ok=!0;else for(var W=0,R=B.length;W<R;W++)if(q.prefix=B[W],void 0!==t[q.prefix+"CancelFullScreen"]){q.ok=!0;break}q.ok&&(q.event=q.prefix+"fullscreenchange",q.is=function(){switch(this.prefix){case"":return t.fullScreen;case"webkit":return t.webkitIsFullScreen;default:return t[this.prefix+"FullScreen"]}},q.request=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},q.cancel=function(e){return!!this.is()&&(""===this.prefix?t.cancelFullScreen():t[this.prefix+"CancelFullScreen"]())});var Y,H,U=$(e),K=$(t),G="quirks"===i.hash.replace("#",""),J=X.csstransforms3d,Z=J&&!G,Q=J||"CSS1Compat"===t.compatMode,ee=q.ok,te=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),ie=!Z||te,ae=navigator.msPointerEnabled,oe="onwheel"in t.createElement("div")?"wheel":t.onmousewheel!==a?"mousewheel":"DOMMouseScroll",ne=250,re=300,se="$stageFrame",le="$navDotFrame",ue="$navThumbFrame",de="auto",ce=function(e){var t="bez_"+$.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof $.easing[t]){var i=function(e,t){var i=[null,null],a=[null,null],o=[null,null],n=function(n,r){return o[r]=3*e[r],a[r]=3*(t[r]-e[r])-o[r],i[r]=1-o[r]-a[r],n*(o[r]+n*(a[r]+n*i[r]))},r=function(e){return o[0]+e*(2*a[0]+3*i[0]*e)};return function(e){return n(function(e){for(var t,i=e,a=0;++a<14&&(t=n(i,0)-e,!(Math.abs(t)<.001));)i-=t/r(i);return i}(e),1)}};$.easing[t]=function(t,a,o,n,r){return n*i([e[0],e[1]],[e[2],e[3]])(a/r)+o}}return t}([.1,0,.25,1]),me=1,he={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:2,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:64,thumbheight:64,thumbmargin:2,thumbborderwidth:2,allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:re,captions:!0,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!1,trackpad:!1,shuffle:!1,direction:"ltr",shadows:!0,showcaption:!0,navdir:"horizontal",navarrows:!0,navtype:"thumbs"},fe={left:!0,right:!0,down:!0,up:!0,space:!1,home:!1,end:!1};function pe(){}function ge(e,t,i){return Math.max(isNaN(t)?-1/0:t,Math.min(isNaN(i)?1/0:i,e))}function ve(e,t){return Z?+function(e,t){return e.match(/ma/)&&e.match(/-?\d+(?!d)/g)[e.match(/3d/)?"vertical"===t?13:12:"vertical"===t?5:4]}(e.css("transform"),t):+e.css("vertical"===t?"top":"left").replace("px","")}function we(e,t){var i={};if(Z)switch(t){case"vertical":i.transform="translate3d(0, "+e+"px,0)";break;case"list":break;default:i.transform="translate3d("+e+"px,0,0)"}else"vertical"===t?i.top=e:i.left=e;return i}function _e(e){return{"transition-duration":e+"ms"}}function ye(e,t){return isNaN(e)?t:e}function be(e,t){return ye(+String(e).replace(t||"px",""))}function xe(e,t){return ye(function(e){return/%$/.test(e)?be(e,"%"):a}(e)/100*t,be(e))}function Ce(e){return(!isNaN(be(e))||!isNaN(be(e,"%")))&&e}function ke(e,t,i,a){return(e-(a||0))*(t+(i||0))}function Fe(e,t,i,a){var o,n=e.data();n&&(n.onEndFn=function(){o||(o=!0,clearTimeout(n.tT),i())},n.tProp=t,clearTimeout(n.tT),n.tT=setTimeout((function(){n.onEndFn()}),1.5*a),function(e){var t=e.data();t.tEnd||(We(e[0],{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"}[X.prefixed("transition")],(function(e){t.tProp&&e.propertyName.match(t.tProp)&&t.onEndFn()})),t.tEnd=!0)}(e))}function Se(e,t){var i=e.navdir||"horizontal";if(e.length){var a=e.data();Z?(e.css(_e(0)),a.onEndFn=pe,clearTimeout(a.tT)):e.stop();var o=Me(t,(function(){return ve(e,i)}));return e.css(we(o,i)),o}}function Me(){for(var e,t=0,i=arguments.length;t<i&&"number"!=typeof(e=t?arguments[t]():arguments[t]);t++);return e}function Te(e,t){return Math.round(e+(t-e)/1.5)}function Pe(){return Pe.p=Pe.p||("https:"===i.protocol?"https://":"http://"),Pe.p}function Le(e,i){if("string"!=typeof e)return e;var a,o;if((e=function(e){var i=t.createElement("a");return i.href=e,i}(e)).host.match(/youtube\.com/)&&e.search){if(a=e.search.split("v=")[1]){var n=a.indexOf("&");-1!==n&&(a=a.substring(0,n)),o="youtube"}}else e.host.match(/youtube\.com|youtu\.be|youtube-nocookie.com/)?(a=e.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),o="youtube"):e.host.match(/vimeo\.com/)&&(o="vimeo",a=e.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return a&&o||!i||(a=e.href,o="custom"),!!a&&{id:a,type:o,s:e.search.replace(/^\?/,""),p:Pe()}}function Ie(e,t,i,a){for(var o=0,n=e.length;o<n;o++){var r=e[o];if(r.i===i&&r.thumbsReady){var s={videoReady:!0};s.$stageFrame=s.$navThumbFrame=s.$navDotFrame=!1,a.splice(o,1,$.extend({},r,s,t));break}}}function Ee(e){var t=[];function i(e,t,i){var a=i.thumb&&i.img!==i.thumb,o=be(i.width||e.attr("width")),n=be(i.height||e.attr("height"));$.extend(i,{width:o,height:n,thumbratio:Be(i.thumbratio||be(i.thumbwidth||t&&t.attr("width")||a||o)/be(i.thumbheight||t&&t.attr("height")||a||n))})}return e.children().each((function(){var e,a,o,n,r,s,l,u,d,c=$(this),m=qe($.extend(c.data(),{id:c.attr("id")}));if(c.is("a, img"))a=m,o=!0,n=(e=c).children("img").eq(0),r=e.attr("href"),s=e.attr("src"),l=n.attr("src"),u=a.video,(d=!!o&&Le(r,!0===u))?r=!1:d=u,i(e,n,$.extend(a,{video:d,img:a.img||r||s||l,thumb:a.thumb||l||s||r}));else{if(c.is(":empty"))return;i(c,null,$.extend(m,{html:this,_html:c.html()}))}t.push(m)})),t}function Ve(e,t,i,a){return Ve.i||(Ve.i=1,Ve.ii=[!0]),a=a||Ve.i,void 0===Ve.ii[a]&&(Ve.ii[a]=!0),e()?t():Ve.ii[a]&&setTimeout((function(){Ve.ii[a]&&Ve(e,t,i,a)}),i||100),Ve.i++}function Oe(e,t){var i=e.data(),a=i.measures;if(a&&(!i.l||i.l.W!==a.width||i.l.H!==a.height||i.l.r!==a.ratio||i.l.w!==t.w||i.l.h!==t.h)){var o=ge(t.h,0,a.height),n=o*a.ratio;it.setRatio(e,n,o),i.l={W:a.width,H:a.height,r:a.ratio,w:t.w,h:t.h}}return!0}function ze(e,t,i,a){return t!==i&&("vertical"===a?e<=t?"top":e>=i?"bottom":"top bottom":e<=t?"left":e>=i?"right":"left right")}function Ae(e,t,i){i=i||{},e.each((function(){var e,a=$(this),o=a.data();o.clickOn||(o.clickOn=!0,$.extend(rt(a,{onStart:function(t){e=t,(i.onStart||pe).call(this,t)},onMove:i.onMove||pe,onTouchEnd:i.onTouchEnd||pe,onEnd:function(i){i.moved||t.call(this,e)}}),{noMove:!0}))}))}function $e(e,t){return'<div class="'+e+'">'+(t||"")+"</div>"}function De(e){return"."+e}function je(e){for(var t=e.length;t;){var i=Math.floor(Math.random()*t--),a=e[t];e[t]=e[i],e[i]=a}return e}function Ne(e){return"[object Array]"==Object.prototype.toString.call(e)&&$.map(e,(function(e){return $.extend({},e)}))}function Xe(e,t,i){e.scrollLeft(t||0).scrollTop(i||0)}function qe(e){if(e){var t={};return $.each(e,(function(e,i){t[e.toLowerCase()]=i})),t}}function Be(e){if(e){var t=+e;return isNaN(t)?+(t=e.split("/"))[0]/+t[1]||a:t}}function We(e,t,i,a){t&&(e.addEventListener?e.addEventListener(t,i,!!a):e.attachEvent("on"+t,i))}function Re(e,t){return e>t.max?e=t.max:e<t.min&&(e=t.min),e}function Ye(e,t){return t?{disabled:e}:{tabindex:-1*e+"",disabled:e}}function He(e,t){We(e,"keyup",(function(i){(function(e){return!!e.getAttribute("disabled")})(e)||13==i.keyCode&&t.call(e,i)}))}function Ue(e,t){We(e,"focus",e.onfocusin=function(i){t.call(e,i)},!0)}function Ke(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&e.stopPropagation&&e.stopPropagation()}function Ge(e){return e?">":"<"}Ve.stop=function(e){Ve.ii[e]=!1};var Je,Ze,Qe,et,tt,it=(jQuery,{setRatio:function(e,t,i){t/i<=1?(e.parent().removeClass(z),e.parent().addClass(A)):(e.parent().removeClass(A),e.parent().addClass(z))},setThumbAttr:function(e,t,i){var o=i;e.attr(o)||e.attr(o)===a||e.attr(o,t),e.find("["+o+"]").length&&e.find("["+o+"]").each((function(){$(this).attr(o,t)}))},isExpectedCaption:function(e,t,i){var a,o=!1;return a=e.showCaption===i||!0===e.showCaption,!!t&&(e.caption&&a&&(o=!0),o)}});function at(e,t){var i=e.data(),a=Math.round(t.pos),o=function(){i&&i.sliding&&(i.sliding=!1),(t.onEnd||pe)()};void 0!==t.overPos&&t.overPos!==t.pos&&(a=t.overPos);var n=$.extend(we(a,t.direction),t.width&&{width:t.width},t.height&&{height:t.height});i&&i.sliding&&(i.sliding=!0),Z?(e.css($.extend(_e(t.time),n)),t.time>10?Fe(e,"transform",o,t.time):o()):e.stop().animate(n,t.time,ce,o)}function ot(e,t,i,a,o,n){var r=void 0!==n;if(r||(o.push(arguments),Array.prototype.push.call(arguments,o.length),!(o.length>1))){e=e||$(e),t=t||$(t);var s=e[0],l=t[0],u="crossfade"===a.method,d=function(){if(!d.done){d.done=!0;var e=(r||o.shift())&&o.shift();e&&ot.apply(this,e),(a.onEnd||pe)(!!e)}},c=a.time/(n||1);i.removeClass(x+" "+b),e.stop().addClass(x),t.stop().addClass(b),u&&l&&e.fadeTo(0,0),e.fadeTo(u?c:0,1,u&&d),t.fadeTo(c,0,d),s&&u||l||d()}}function nt(e){var t=(e.touches||[])[0]||e;e._x=t.pageX||t.originalEvent.pageX,e._y=t.clientY||t.originalEvent.clientY,e._now=$.now()}function rt(e,i){var a,o,n,r,s,l,u,d,c,m,h=e[0],f={};function p(e){if(n=$(e.target),f.checked=l=u=d=m=!1,a||f.flow||e.touches&&e.touches.length>1||e.which>1||Je&&Je.type!==e.type&&Qe||(l=i.select&&n.is(i.select,h)))return l;s="touchstart"===e.type,u=n.is("a, a *",h),d=n.hasClass("disableSwipe"),r=f.control,c=f.noMove||f.noSwipe||r?16:f.snap?0:4,nt(e),o=Je=e,Ze=e.type.replace(/down|start/,"move").replace(/Down/,"Move"),(i.onStart||pe).call(h,e,{control:r,$target:n}),a=f.flow=!0,d||s&&!f.go||Ke(e)}function g(e){if(e.touches&&e.touches.length>1||ae&&!e.isPrimary||Ze!==e.type||!a)return a&&w(),void(i.onTouchEnd||pe)();if(!(d=$(e.target).hasClass("disableSwipe"))){nt(e);var t=Math.abs(e._x-o._x),n=Math.abs(e._y-o._y),r=t-n,l=(f.go||f.x||r>=0)&&!f.noSwipe,u=r<0;s&&!f.checked?(a=l)&&Ke(e):(Ke(e),v(t,n)&&(i.onMove||pe).call(h,e,{touch:s})),!m&&v(t,n)&&Math.sqrt(Math.pow(t,2)+Math.pow(n,2))>c&&(m=!0),f.checked=f.checked||l||u}}function v(e,t){return e>t&&e>1.5}function w(e){(i.onTouchEnd||pe)();var t=a;f.control=a=!1,t&&(f.flow=!1),!t||u&&!f.checked||(e&&Ke(e),Qe=!0,clearTimeout(et),et=setTimeout((function(){Qe=!1}),1e3),(i.onEnd||pe).call(h,{moved:m,$target:n,control:r,touch:s,startEvent:o,aborted:!e||"MSPointerCancel"===e.type}))}function _(){f.flow&&(f.flow=!1)}return ae?(We(h,"MSPointerDown",p),We(t,"MSPointerMove",g),We(t,"MSPointerCancel",w),We(t,"MSPointerUp",w)):(We(h,"touchstart",p),We(h,"touchmove",g),We(h,"touchend",w),We(t,"touchstart",(function(){f.flow||(f.flow=!0)})),We(t,"touchend",_),We(t,"touchcancel",_),U.on("scroll",_),e.on("mousedown",p),K.on("mousemove",g).on("mouseup",w)),tt=X.touch?"a":"div",e.on("click",tt,(function(e){f.checked&&Ke(e)})),f}function st(e,t){var i,a,o,n,r,s,l,u,d,c,m,h,f,p,g,v=e[0],w=e.data(),_={};function y(r,u){g=!0,i=a="vertical"===h?r._y:r._x,l=r._now,s=[[l,i]],o=n=_.noMove||u?0:Se(e,(t.getPos||pe)()),(t.onStart||pe).call(v,r)}return _=$.extend(rt(t.$wrap,$.extend({},t,{onStart:function(t,i){d=_.min,c=_.max,m=_.snap,h=_.direction||"horizontal",e.navdir=h,f=t.altKey,g=p=!1,i.control||w.sliding||y(t)},onMove:function(l,u){_.noSwipe||(g||y(l),a="vertical"===h?l._y:l._x,s.push([l._now,a]),r=ze(n=o-(i-a),d,c,h),n<=d?n=Te(n,d):n>=c&&(n=Te(n,c)),_.noMove||(e.css(we(n,h)),p||(p=!0,u.touch||ae||e.addClass(L)),(t.onMove||pe).call(v,l,{pos:n,edge:r})))},onEnd:function(i){if(!_.noSwipe||!i.moved){g||y(i.startEvent,!0),i.touch||ae||e.removeClass(L);for(var r,l,p,w,b,x,C,k,F,S=(u=$.now())-ne,M=null,T=re,P=t.friction,I=s.length-1;I>=0;I--){if(r=s[I][0],l=Math.abs(r-S),null===M||l<p)M=r,w=s[I][1];else if(M===S||l>p)break;p=l}C=ge(n,d,c);var E=w-a,V=E>=0,O=u-M,z=O>ne,A=!z&&n!==o&&C===n;m&&(C=ge(Math[A?V?"floor":"ceil":"round"](n/m)*m,d,c),d=c=C),A&&(m||C===n)&&(F=-E/O,T*=ge(Math.abs(F),t.timeLow,t.timeHigh),b=Math.round(n+F*T/P),m||(C=b),(!V&&b>c||V&&b<d)&&(x=V?d:c,m||(C=x),k=ge(C+.03*(k=b-x),x-50,x+50),T=Math.abs((n-k)/(F/P)))),T*=f?10:1,(t.onEnd||pe).call(v,$.extend(i,{moved:i.moved||z&&m,pos:n,newPos:C,overPos:k,time:T,dir:h}))}}})),_)}function lt(e,t){var i,a,o,n=e[0],r={prevent:{}};return We(n,oe,(function(e){var n=e.wheelDeltaY||-1*e.deltaY||0,s=e.wheelDeltaX||-1*e.deltaX||0,l=Math.abs(s)&&!Math.abs(n),u=Ge(s<0),d=a===u,c=$.now(),m=c-o<ne;a=u,o=c,l&&r.ok&&(!r.prevent[u]||i)&&(Ke(e,!0),i&&d&&m||(t.shift&&(i=!0,clearTimeout(r.t),r.t=setTimeout((function(){i=!1}),1400)),(t.onEnd||pe)(e,t.shift?u:s)))})),r}function ut(){$.each($.Fotorama.instances,(function(e,t){t.index=e}))}jQuery.Fotorama=function(i,y){Y=$("html"),H=$("body");var b,x,L,z,A,N,X,B,W,R,G,J,te,oe,ce,he,pe,ye,Fe,Te,We,Je,Ze,Qe,et,tt,nt,rt,dt,ct,mt,ht,ft,pt,gt,vt,wt=this,_t=$.now(),yt=o+_t,bt=i[0],xt=1,Ct=i.data(),kt=$("<style></style>"),Ft=$($e("fotorama--hidden")),St=i.find(De(r)),Mt=St.find(De(l)),Tt=(Mt[0],i.find(De("fotorama__stage__shaft"))),Pt=$(),Lt=i.find(De("fotorama__arr--prev")),It=i.find(De("fotorama__arr--next")),Et=i.find(De(c)),Vt=i.find(De(f)),Ot=Vt.find(De(h)),zt=Ot.find(De("fotorama__nav__shaft")),At=$(),$t=$(),Dt=(Tt.data(),zt.data(),i.find(De("fotorama__thumb-border"))),jt=i.find(De("fotorama__thumb__arr--left")),Nt=i.find(De("fotorama__thumb__arr--right")),Xt=i.find(De("fotorama__fullscreen-icon")),qt=Xt[0],Bt=$($e(O)),Wt=i.find(De("fotorama__video-close"))[0],Rt=i.find(De(D)),Yt=!1,Ht={},Ut={},Kt={},Gt={},Jt={},Zt={},Qt={},ei=0,ti=[];function ii(){$.each(b,(function(e,t){if(!t.i){t.i=xt++;var i=Le(t.video,!0);if(i){var a={};t.video=i,t.img||t.thumb?t.thumbsReady=!0:a=function(e,t,i){var a,o,n=e.video;return"youtube"===n.type?(a=(o=Pe()+"img.youtube.com/vi/"+n.id+"/default.jpg").replace(/\/default.jpg$/,"/hqdefault.jpg"),e.thumbsReady=!0):"vimeo"===n.type?$.ajax({url:Pe()+"vimeo.com/api/oembed.json",data:{url:"https://vimeo.com/"+n.id},dataType:"jsonp",success:function(a){e.thumbsReady=!0,Ie(t,{img:a[0].thumbnail_url,thumb:a[0].thumbnail_url},e.i,i)}}):e.thumbsReady=!0,{img:a,thumb:o}}(t,b,wt),Ie(b,{img:a.img,thumb:a.thumb},t.i,wt)}}}))}function ai(e){return nt[e]}function oi(){if(Mt!==a)if("vertical"==y.navdir){var e=y.thumbwidth+y.thumbmargin;Mt.css("left",e),It.css("right",e),Xt.css("right",e),St.css("width",St.css("width")+e),Tt.css("max-width",St.width()-e)}else Mt.css("left",""),It.css("right",""),Xt.css("right",""),St.css("width",St.css("width")+e),Tt.css("max-width","")}function ni(e){var t;e!==ni.f&&(e?(i.addClass("fotorama "+yt).before(Ft).before(kt),t=wt,$.Fotorama.instances.push(t),ut()):(Ft.detach(),kt.detach(),i.html(Ct.urtext).removeClass(yt),function(e){$.Fotorama.instances.splice(e.index,1),ut()}(wt)),function(e){var t,i="keydown.fotorama",a=o+_t,r="keydown."+a,s="keyup."+a,l="resize."+a+" orientationchange."+a;e?(K.on(r,(function(e){var i,a;z&&27===e.keyCode?(i=!0,Ri(z,!0,!0)):(wt.fullScreen||y.keyboard&&!wt.index)&&(27===e.keyCode?(i=!0,wt.cancelFullScreen()):e.shiftKey&&32===e.keyCode&&ai("space")||!e.altKey&&!e.metaKey&&37===e.keyCode&&ai("left")||38===e.keyCode&&ai("up")&&$(":focus").attr("data-gallery-role")?(wt.longPress.progress(),a="<"):32===e.keyCode&&ai("space")||!e.altKey&&!e.metaKey&&39===e.keyCode&&ai("right")||40===e.keyCode&&ai("down")&&$(":focus").attr("data-gallery-role")?(wt.longPress.progress(),a=">"):36===e.keyCode&&ai("home")?(wt.longPress.progress(),a="<<"):35===e.keyCode&&ai("end")&&(wt.longPress.progress(),a=">>")),(i||a)&&Ke(e),t={index:a,slow:e.altKey,user:!0},a&&(wt.longPress.inProgress?wt.showWhileLongPress(t):wt.show(t))})),e&&K.on(s,(function(e){wt.longPress.inProgress&&wt.showEndLongPress({user:!0}),wt.longPress.reset()})),wt.index||K.off(i).on(i,"textarea, input, select",(function(e){!H.hasClass(n)&&e.stopPropagation()})),U.on(l,wt.resize)):(K.off(r),U.off(l))}(e),ni.f=e)}function ri(){var e=x<2||z;Ut.noMove=e||Te,Ut.noSwipe=e||!y.swipe,!Qe&&Tt.toggleClass(d,!y.click&&!Ut.noMove&&!Ut.noSwipe),ae&&St.toggleClass("fotorama__wrap--pan-y",!Ut.noSwipe)}function si(e){!0===e&&(e=""),y.autoplay=Math.max(+e||5e3,1.5*Ze)}function li(e,t){return Math.floor(St.width()/(t.thumbwidth+t.thumbmargin))}function ui(){var e;y.nav&&"dots"!==y.nav||(y.navdir="horizontal"),wt.options=y=qe(y),me=li(0,y),Te="crossfade"===y.transition||"dissolve"===y.transition,oe=y.loop&&(x>2||Te&&(!Qe||"slide"!==Qe)),Ze=+y.transitionduration||re,tt="rtl"===y.direction,nt=$.extend({},y.keyboard&&fe,y.keyboard),(e=y).navarrows&&"thumbs"===e.nav?(jt.show(),Nt.show()):(jt.hide(),Nt.hide());var t,i,a,o={add:[],remove:[]};function n(e,t){o[e?"add":"remove"].push(t)}x>1?(ce=y.nav,pe="top"===y.navposition,o.remove.push(F),Et.toggle(!!y.arrows)):(ce=!1,Et.hide()),Si(),Ti(),Mi(),y.autoplay&&si(y.autoplay),We=be(y.thumbwidth)||64,Je=be(y.thumbheight)||64,Kt.ok=Jt.ok=y.trackpad&&!ie,ri(),zi(y,[Ht]),he="thumbs"===ce,Vt.filter(":hidden")&&ce&&Vt.show(),he?(yi(x,"navThumb"),L=$t,vt=ue,t=kt,i=$.Fotorama.jst.style({w:We,h:Je,b:y.thumbborderwidth,m:y.thumbmargin,s:_t,q:!Q}),(a=t[0]).styleSheet?a.styleSheet.cssText=i:t.html(i),Ot.addClass(_).removeClass(w)):"dots"===ce?(yi(x,"navDot"),L=At,vt=le,Ot.addClass(w).removeClass(_)):(Vt.hide(),ce=!1,Ot.removeClass(_+" "+w)),ce&&(pe?Vt.insertBefore(Mt):Vt.insertAfter(Mt),ki.nav=!1,ki(L,zt,"nav")),(ye=y.allowfullscreen)?(Xt.prependTo(Mt),Fe=ee&&"native"===ye):(Xt.detach(),Fe=!1),n(Te,"fotorama__wrap--fade"),n(!Te,"fotorama__wrap--slide"),n(!y.captions,"fotorama__wrap--no-captions"),n(tt,"fotorama__wrap--rtl"),n(y.arrows,"fotorama__wrap--toggle-arrows"),n(!(et=y.shadows&&!ie),"fotorama__wrap--no-shadows"),St.addClass(o.add.join(" ")).removeClass(o.remove.join(" ")),$.extend({},y),oi()}function di(e){return e<0?(x+e%x)%x:e>=x?e%x:e}function ci(e){return ge(e,0,x-1)}function mi(e){return oe?di(e):ci(e)}function hi(e){return!!(e>0||oe)&&e-1}function fi(e){return!!(e<x-1||oe)&&e+1}function pi(e,t,i){if("number"==typeof e){e=new Array(e);var a=!0}return $.each(e,(function(e,o){if(a&&(o=e),"number"==typeof o){var n=b[di(o)];if(n){var r="$"+t+"Frame",s=n[r];i.call(this,e,o,n,s,r,s&&s.data())}}}))}function gi(e,t,i,a){(!rt||"*"===rt&&a===te)&&(e=Ce(y.width)||Ce(e)||500,t=Ce(y.height)||Ce(t)||333,wt.resize({width:e,ratio:y.ratio||i||e/t},0,a!==te&&"*"))}function vi(e,t,i,a){pi(e,t,(function(e,o,n,r,s,l){if(r){var d=wt.fullScreen&&!l.$full&&"stage"===t;if(!l.$img||a||d){var c=new Image,m=$(c),h=m.data();l[d?"$full":"$img"]=m;var f="stage"===t?d?"full":"img":"thumb",p=n[f],g=d?n.img:n["stage"===t?"thumb":"img"];"navThumb"===t&&(r=l.$wrap),p?($.Fotorama.cache[p]?function e(){"error"===$.Fotorama.cache[p]?w():"loaded"===$.Fotorama.cache[p]?setTimeout(_,0):setTimeout(e,100)}():($.Fotorama.cache[p]="*",m.on("load",_).on("error",w)),l.state="",c.src=p,l.data.caption&&(c.alt=l.data.caption||""),l.data.full&&$(c).data("original",l.data.full),it.isExpectedCaption(n,y.showcaption)&&$(c).attr("aria-labelledby",n.labelledby)):w()}}function v(e){var t=di(o);Ai(e,{index:t,src:p,frame:b[t]})}function w(){m.remove(),$.Fotorama.cache[p]="error",n.html&&"stage"===t||!g||g===p?(!p||n.html||d?"stage"===t&&(r.trigger("f:load").removeClass(T+" "+M).addClass(P),v("load"),gi()):(r.trigger("f:error").removeClass(T).addClass(M),v("error")),l.state="error",!(x>1&&b[o]===n)||n.html||n.deleted||n.video||d||(n.deleted=!0,wt.splice(o,1))):(n[f]=p=g,l.$full=null,vi([o],t,i,!0))}function _(){var e=10;Ve((function(){return!pt||!e--&&!ie}),(function(){$.Fotorama.measures[p]=h.measures=$.Fotorama.measures[p]||{width:c.width,height:c.height,ratio:c.width/c.height},gi(h.measures.width,h.measures.height,h.measures.ratio,o),m.off("load error").addClass(""+(d?E:I)).attr("aria-hidden","false").prependTo(r),r.hasClass(u)&&!r.hasClass("fotorama-video-container")&&r.attr("href",m.attr("src")),Oe(m,($.isFunction(i)?i():i)||Ht),$.Fotorama.cache[p]=l.state="loaded",setTimeout((function(){r.trigger("f:load").removeClass(T+" "+M).addClass(P+" "+(d?"fotorama__loaded--full":"fotorama__loaded--img")),"stage"===t?v("load"):(n.thumbratio===de||!n.thumbratio&&y.thumbratio===de)&&(n.thumbratio=h.measures.ratio,Qi())}),0)}))}}))}function wi(){var e=A.$stageFrame;e&&!e.data().state&&(Rt.addClass(j),e.on("f:load f:error",(function(){e.off("f:load f:error"),Rt.removeClass(j)})))}function _i(e){He(e,Gi),Ue(e,(function(){setTimeout((function(){Xe(Ot)}),0),Ii({time:Ze,guessIndex:$(this).data().eq,minMax:Gt})}))}function yi(e,t){pi(e,t,(function(e,i,a,o,n,r){if(!o){o=a[n]=St[n].clone(),(r=o.data()).data=a;var s=o[0],l="labelledby"+$.now();"stage"===t?(a.html&&$('<div class="fotorama__html"></div>').append(a._html?$(a.html).removeAttr("id").html(a._html):a.html).appendTo(o),a.id&&(l=a.id||l),a.labelledby=l,it.isExpectedCaption(a,y.showcaption)&&$($.Fotorama.jst.frameCaption({caption:a.caption,labelledby:l})).appendTo(o),a.video&&o.addClass("fotorama__stage__frame--video").append(Bt.clone()),Ue(s,(function(e){setTimeout((function(){Xe(Mt)}),0),Ui({index:r.eq,user:!0},e)})),Pt=Pt.add(o)):"navDot"===t?(_i(s),At=At.add(o)):"navThumb"===t&&(_i(s),r.$wrap=o.children(":first"),$t=$t.add(o),a.video&&r.$wrap.append(Bt.clone()))}}))}function bi(e,t){return e&&e.length&&Oe(e,t)}function xi(e){pi(e,"stage",(function(e,i,a,o,n,r){if(o){var s,l=di(i);r.eq=l,Qt.$stageFrame[l]=o.css($.extend({left:Te?0:ke(i,Ht.w,y.margin,X)},Te&&_e(0))),s=o[0],$.contains(t.documentElement,s)||(o.appendTo(Tt),Ri(a.$video)),bi(r.$img,Ht),bi(r.$full,Ht),!o.hasClass(u)||"false"===o.attr("aria-hidden")&&o.hasClass(k)||o.attr("aria-hidden","true")}}))}function Ci(e,t){var i,a;"thumbs"!==ce||isNaN(e)||(i=-e,a=-e+Ht.nw,"vertical"===y.navdir&&(e-=y.thumbheight,a=-e+Ht.h),$t.each((function(){var e=$(this).data(),o=e.eq,n=function(){return{h:Je,w:e.w}},r=n(),s="vertical"===y.navdir?e.t>a:e.l>a;r.w=e.w,"vertical"!==y.navdir&&e.l+e.w<i||s||bi(e.$img,r)||t&&vi([o],"navThumb",n)})))}function ki(e,t,i){if(!ki[i]){var a="nav"===i&&he,o=0,n=0;t.append(e.filter((function(){for(var e,t=$(this),i=t.data(),a=0,o=b.length;a<o;a++)if(i.data===b[a]){e=!0,i.eq=a;break}return e||t.remove()&&!1})).sort((function(e,t){return $(e).data().eq-$(t).data().eq})).each((function(){var e=$(this),t=e.data();it.setThumbAttr(e,t.data.caption,"aria-label")})).each((function(){if(a){var e=$(this),t=e.data(),i=Math.round(Je*t.data.thumbratio)||We,r=Math.round(We/t.data.thumbratio)||Je;t.t=n,t.h=r,t.l=o,t.w=i,e.css({width:i}),n+=r+y.thumbmargin,o+=i+y.thumbmargin}}))),ki[i]=!0}}function Fi(e){return!(oe||Yt+e&&Yt-x+e||z)}function Si(){var e=Fi(0),t=Fi(1);Lt.toggleClass(m,e).attr(Ye(e,!1)),It.toggleClass(m,t).attr(Ye(t,!1))}function Mi(){var e=!1,t=!1;if("thumbs"!==y.navtype||y.loop||(e=0==Yt,t=Yt==y.data.length-1),"slides"===y.navtype){var i=ve(zt,y.navdir);e=i>=Gt.max,t=i<=Gt.min}jt.toggleClass(m,e).attr(Ye(e,!0)),Nt.toggleClass(m,t).attr(Ye(t,!0))}function Ti(){Kt.ok&&(Kt.prevent={"<":Fi(0),">":Fi(1)})}function Pi(e){var t,i,a,o,n=e.data();he?(t=n.l,i=n.t,a=n.w,o=n.h):(t=e.position().left,a=e.width());var r={c:t+a/2,min:-t+10*y.thumbmargin,max:-t+Ht.w-a-10*y.thumbmargin},s={c:i+o/2,min:-i+10*y.thumbmargin,max:-i+Ht.h-o-10*y.thumbmargin};return"vertical"===y.navdir?s:r}function Li(e){var t=A[vt].data();at(Dt,{time:1.2*e,pos:"vertical"===y.navdir?t.t:t.l,width:t.w,height:t.h,direction:y.navdir})}function Ii(e){var t,i,a,o,n,r,s,l,u=b[e.guessIndex][vt],d=y.navtype;u&&("thumbs"===d?(t=Gt.min!==Gt.max,a=e.minMax||t&&Pi(A[vt]),o=t&&(e.keep&&Ii.t?Ii.l:ge((e.coo||Ht.nw/2)-Pi(u).c,a.min,a.max)),n=t&&(e.keep&&Ii.l?Ii.l:ge((e.coo||Ht.nw/2)-Pi(u).c,a.min,a.max)),r="vertical"===y.navdir?o:n,s=t&&ge(r,Gt.min,Gt.max)||0,i=1.1*e.time,at(zt,{time:i,pos:s,direction:y.navdir,onEnd:function(){Ci(s,!0),Mi()}}),Wi(Ot,ze(s,Gt.min,Gt.max,y.navdir)),Ii.l=r):(l=ve(zt,y.navdir),i=1.11*e.time,s=function(e,t,i,a,o,n,r){var s,l;return"horizontal"===r?(s=e.thumbwidth,l=n.width()):(s=e.thumbheight,l=n.height()),Re((s+e.margin)*(i+1)>=l-a?"horizontal"===r?-o.position().left:-o.position().top:(s+e.margin)*i<=Math.abs(a)?"horizontal"===r?-o.position().left+l-(s+e.margin):-o.position().top+l-(s+e.margin):a,t)||0}(y,Gt,e.guessIndex,l,u,Vt,y.navdir),at(zt,{time:i,pos:s,direction:y.navdir,onEnd:function(){Ci(s,!0),Mi()}}),Wi(Ot,ze(s,Gt.min,Gt.max,y.navdir))))}function Ei(e){for(var t=Zt[e];t.length;)t.shift().removeClass(k).attr("data-active",!1)}function Vi(e){var t=Qt[e];$.each(N,(function(e,i){delete t[di(i)]})),$.each(t,(function(e,i){delete t[e],i.detach()}))}function Oi(e){X=B=Yt;var t,a,o,n=A.$stageFrame;n&&(Ei(se),Zt.$stageFrame.push(n.addClass(k).attr("data-active",!0)),n.hasClass(u)&&n.attr("aria-hidden","false"),e||wt.showStage.onEnd(!0),Se(Tt,0),Vi(se),xi(N),Ut.min=oe?-1/0:-ke(x-1,Ht.w,y.margin,X),Ut.max=oe?1/0:-ke(0,Ht.w,y.margin,X),Ut.snap=Ht.w+y.margin,t="vertical"===y.navdir,a=t?zt.height():zt.width(),o=t?Ht.h:Ht.nw,Gt.min=Math.min(0,o-a),Gt.max=0,Gt.direction=y.navdir,zt.toggleClass(d,!(Gt.noMove=Gt.min===Gt.max)),He(Tt[0],(function(){i.hasClass(S)||(wt.requestFullScreen(),Xt.focus())})))}function zi(e,t){e&&$.each(t,(function(t,i){i&&$.extend(i,{width:e.width||i.width,height:e.height,minwidth:e.minwidth,maxwidth:e.maxwidth,minheight:e.minheight,maxheight:e.maxheight,ratio:Be(e.ratio)})}))}function Ai(e,t){i.trigger("fotorama:"+e,[wt,t])}function $i(){clearTimeout(Di.t),pt=1,y.stopautoplayontouch?wt.stopAutoplay():mt=!0}function Di(){pt&&(y.stopautoplayontouch||(ji(),Ni()),Di.t=setTimeout((function(){pt=0}),550))}function ji(){mt=!(!z&&!ht)}function Ni(){if(clearTimeout(Ni.t),Ve.stop(Ni.w),y.autoplay&&!mt){wt.autoplay||(wt.autoplay=!0,Ai("startautoplay"));var e=Yt,t=A.$stageFrame.data();Ni.w=Ve((function(){return t.state||e!==Yt}),(function(){Ni.t=setTimeout((function(){if(!mt&&e===Yt){var t=J,i=b[t].$stageFrame.data();Ni.w=Ve((function(){return i.state||t!==J}),(function(){mt||t!==J||wt.show(oe?Ge(!tt):J)}))}}),y.autoplay)}))}else wt.autoplay&&(wt.autoplay=!1,Ai("stopautoplay"))}function Xi(e){var t;return"object"!=typeof e?(t=e,e={}):t=e.index,t=">"===t?B+1:"<"===t?B-1:"<<"===t?0:">>"===t?x-1:t,t=void 0===(t=isNaN(t)?a:t)?Yt||0:t}function qi(e){wt.activeIndex=Yt=mi(e),R=hi(Yt),G=fi(Yt),J=di(Yt+(tt?-1:1)),N=[Yt,R,G],B=oe?e:Yt}function Bi(e){var t=Math.abs(W-B),i=Me(e.time,(function(){return Math.min(Ze*(1+(t-1)/12),2*Ze)}));return e.slow&&(i*=10),i}function Wi(e,t){et&&(e.removeClass("fotorama__shadows--left fotorama__shadows--right"),e.removeClass("fotorama__shadows--top fotorama__shadows--bottom"),t&&!z&&e.addClass(t.replace(/^|\s/g," "+C+"--")))}function Ri(e,t,i){t&&(St.removeClass(s),z=!1,ri()),e&&e!==z&&(e.remove(),Ai("unloadvideo")),i&&(ji(),Ni())}function Yi(e){St.toggleClass("fotorama__wrap--no-controls",e)}function Hi(e){if(!Ut.flow){var t=e?e.pageX:Hi.x,i=t&&!Fi(function(e){return e-ei>Ht.w/3}(t))&&y.click;Hi.p!==i&&Mt.toggleClass("fotorama__pointer",i)&&(Hi.p=i,Hi.x=t)}}function Ui(e,t){clearTimeout(Ui.t),y.clicktransition&&y.clicktransition!==y.transition?setTimeout((function(){var t=y.transition;wt.setOptions({transition:y.clicktransition}),Qe=t,Ui.t=setTimeout((function(){wt.show(e)}),10)}),0):wt.show(e,t)}function Ki(e,t){Ut[e]=Gt[e]=t}function Gi(e){var t=$(this).data().eq;"thumbs"===y.navtype?Ui({index:t,slow:e.altKey,user:!0,coo:e._x-Ot.offset().left}):Ui({index:t,slow:e.altKey,user:!0})}function Ji(e){Ui({index:Et.index(this)?">":"<",slow:e.altKey,user:!0})}function Zi(e){Ue(e,(function(){setTimeout((function(){Xe(Mt)}),0),Yi(!1)}))}function Qi(){if(b=wt.data=b||Ne(y.data)||Ee(i),x=wt.size=b.length,ta.ok&&y.shuffle&&je(b),ii(),Yt=ci(Yt),x&&ni(!0),ui(),!Qi.i){Qi.i=!0;var e=y.startindex;Yt=X=B=W=te=mi(e)||0}if(x){if(ea())return;z&&Ri(z,!0),N=[],Vi(se),Qi.ok=!0,wt.show({index:Yt,time:0}),wt.resize()}else wt.destroy()}function ea(){if(!ea.f===tt)return ea.f=tt,Yt=x-1-Yt,wt.reverse(),!0}function ta(){ta.ok&&(ta.ok=!1,Ai("ready"))}St.$stageFrame=$('<div class="'+u+'"></div>'),St.$navThumbFrame=$($.Fotorama.jst.thumb()),St.$navDotFrame=$($.Fotorama.jst.dots()),Zt.$stageFrame=[],Zt.$navThumbFrame=[],Zt.$navDotFrame=[],Qt.$stageFrame={},St.addClass(Z?"fotorama__wrap--css3":"fotorama__wrap--css2"),Ct.fotorama=this,wt.startAutoplay=function(e){return wt.autoplay||(mt=ht=!1,si(e||y.autoplay),Ni()),this},wt.stopAutoplay=function(){return wt.autoplay&&(mt=ht=!0,Ni()),this},wt.showSlide=function(e){var t,i=ve(zt,y.navdir),a="horizontal"===y.navdir?y.thumbwidth:y.thumbheight;"next"===e&&(t=i-(a+y.margin)*me),"prev"===e&&(t=i+(a+y.margin)*me),Ci(t=Re(t,Gt),!0),at(zt,{time:550,pos:t,direction:y.navdir,onEnd:function(){Mi()}})},wt.showWhileLongPress=function(e){if(!wt.longPress.singlePressInProgress){qi(Xi(e));var t=Bi(e)/50,i=A;wt.activeFrame=A=b[Yt];var a=i===A&&!e.user;return wt.showNav(a,e,t),this}},wt.showEndLongPress=function(e){if(!wt.longPress.singlePressInProgress){qi(Xi(e));var t=Bi(e)/50,i=A;wt.activeFrame=A=b[Yt];var a=i===A&&!e.user;return wt.showStage(a,e,t),void 0!==W&&W!==Yt,W=Yt,this}},wt.showStage=function(e,t,i,o){if(o===a||"IFRAME"!=o.target.tagName){Ri(z,A.i!==b[di(X)].i),yi(N,"stage"),xi(ie?[B]:[B,hi(B),fi(B)]),Ki("go",!0),e||Ai("show",{user:t.user,time:i}),mt=!0;var n=t.overPos,r=wt.showStage.onEnd=function(i){if(!r.ok){if(r.ok=!0,i||Oi(!0),e||Ai("showend",{user:t.user}),!i&&Qe&&Qe!==y.transition)return wt.setOptions({transition:Qe}),void(Qe=!1);wi(),vi(N,"stage"),Ki("go",!1),Ti(),Hi(),ji(),Ni(),wt.fullScreen?(A.$stageFrame.find("."+E).attr("aria-hidden",!1),A.$stageFrame.find("."+I).attr("aria-hidden",!0)):(A.$stageFrame.find("."+E).attr("aria-hidden",!0),A.$stageFrame.find("."+I).attr("aria-hidden",!1))}};if(Te)ot(A.$stageFrame,b[W]&&Yt!==W?b[W].$stageFrame:null,Pt,{time:i,method:y.transition,onEnd:r},ti);else at(Tt,{pos:-ke(B,Ht.w,y.margin,X),overPos:n,time:i,onEnd:r});Si()}},wt.showNav=function(e,t,i){if(Mi(),ce){Ei(vt),Zt[vt].push(A[vt].addClass(k).attr("data-active",!0));var a=ci(Yt+ge(B-W,-1,1));Ii({time:i,coo:a!==Yt&&t.coo,guessIndex:void 0!==t.coo?a:Yt,keep:e}),he&&Li(i)}},wt.show=function(e,t){wt.longPress.singlePressInProgress=!0,qi(Xi(e));var i=Bi(e),a=A;wt.activeFrame=A=b[Yt];var o=a===A&&!e.user;return wt.showStage(o,e,i,t),wt.showNav(o,e,i),void 0!==W&&W!==Yt,W=Yt,wt.longPress.singlePressInProgress=!1,this},wt.requestFullScreen=function(){if(ye&&!wt.fullScreen){if($((wt.activeFrame||{}).$stageFrame||{}).hasClass("fotorama-video-container"))return;dt=U.scrollTop(),ct=U.scrollLeft(),Xe(U),Ki("x",!0),ft=$.extend({},Ht),i.addClass(S).appendTo(H.addClass(n)),Y.addClass(n),Ri(z,!0,!0),wt.fullScreen=!0,Fe&&q.request(bt),wt.resize(),vi(N,"stage"),wi(),Ai("fullscreenenter"),"ontouchstart"in e||Xt.focus()}return this},wt.cancelFullScreen=function(){return Fe&&q.is()?q.cancel(t):wt.fullScreen&&(wt.fullScreen=!1,ee&&q.cancel(bt),H.removeClass(n),Y.removeClass(n),i.removeClass(S).insertAfter(Ft),Ht=$.extend({},ft),Ri(z,!0,!0),Ki("x",!1),wt.resize(),vi(N,"stage"),Xe(U,ct,dt),Ai("fullscreenexit")),this},wt.toggleFullScreen=function(){return wt[(wt.fullScreen?"cancel":"request")+"FullScreen"]()},wt.resize=function(t){if(!b)return this;var i=arguments[1]||0,a=arguments[2];me=li(0,y),zi(wt.fullScreen?{width:$(e).width(),maxwidth:null,minwidth:null,height:$(e).height(),maxheight:null,minheight:null}:qe(t),[Ht,a||wt.fullScreen||y]);var o=Ht.width,n=Ht.height,r=Ht.ratio,s=U.height()-(ce?Ot.height():0);if(Ce(o)&&(St.css({width:""}),Mt.css({width:""}),Tt.css({width:""}),Ot.css({width:""}),St.css({minWidth:Ht.minwidth||0,maxWidth:Ht.maxwidth||1200}),"dots"===ce&&Vt.hide(),o=Ht.W=Ht.w=St.width(),Ht.nw=ce&&xe(y.navwidth,o)||o,Tt.css({width:Ht.w,marginLeft:(Ht.W-Ht.w)/2}),n=(n=xe(n,s))||r&&o/r)){if(o=Math.round(o),n=Ht.h=Math.round(ge(n,xe(Ht.minheight,s),xe(Ht.maxheight,s))),Mt.css({width:o,height:n}),"vertical"!==y.navdir||wt.fullscreen||Ot.width(y.thumbwidth+2*y.thumbmargin),"horizontal"!==y.navdir||wt.fullscreen||Ot.height(y.thumbheight+2*y.thumbmargin),"dots"===ce&&(Ot.width(o).height("auto"),Vt.show()),"vertical"===y.navdir&&wt.fullScreen&&Mt.css("height",U.height()),"horizontal"===y.navdir&&wt.fullScreen&&Mt.css("height",U.height()-Ot.height()),ce){switch(y.navdir){case"vertical":Vt.removeClass(v),Vt.removeClass(g),Vt.addClass(p),Ot.stop().animate({height:Ht.h,width:y.thumbwidth},i);break;case"list":Vt.removeClass(p),Vt.removeClass(v),Vt.addClass(g);break;default:Vt.removeClass(p),Vt.removeClass(g),Vt.addClass(v),Ot.stop().animate({width:Ht.nw},i)}Oi(),Ii({guessIndex:Yt,time:i,keep:!0}),he&&ki.nav&&Li(i)}rt=a||!0,ta.ok=!0,ta()}return ei=Mt.offset().left,oi(),this},wt.setOptions=function(e){return $.extend(y,e),Qi(),this},wt.shuffle=function(){return b&&je(b)&&Qi(),this},wt.longPress={threshold:1,count:0,thumbSlideTime:20,progress:function(){this.inProgress||(this.count++,this.inProgress=this.count>this.threshold)},end:function(){this.inProgress&&(this.isEnded=!0)},reset:function(){this.count=0,this.inProgress=!1,this.isEnded=!1}},wt.destroy=function(){return wt.cancelFullScreen(),wt.stopAutoplay(),b=wt.data=null,ni(),N=[],Vi(se),Qi.ok=!1,this},wt.playVideo=function(){var e=A,t=e.video,i=Yt;return"object"==typeof t&&e.videoReady&&(Fe&&wt.fullScreen&&wt.cancelFullScreen(),Ve((function(){return!q.is()||i!==Yt}),(function(){var a;i===Yt&&(e.$video=e.$video||$($e(V)).append('<iframe src="'+(a=t).p+a.type+".com/embed/"+a.id+'" frameborder="0" allowfullscreen></iframe>'),e.$video.appendTo(e.$stageFrame),St.addClass(s),z=e.$video,ri(),Et.blur(),Xt.blur(),Ai("loadvideo"))}))),this},wt.stopVideo=function(){return Ri(z,!0,!0),this},wt.spliceByIndex=function(e,t){t.i=e+1,t.img&&$.ajax({url:t.img,type:"HEAD",success:function(){b.splice(e,1,t),Qi()}})},Mt.on("mousemove",Hi),Ut=st(Tt,{onStart:$i,onMove:function(e,t){Wi(Mt,t.edge)},onTouchEnd:Di,onEnd:function(e){var t,a,o;if(Wi(Mt),t=(ae&&!gt||e.touch)&&y.arrows,(e.moved||t&&e.pos!==e.newPos&&!e.control)&&e.$target[0]!==Xt[0]){var n=function(e,t,i,a){return-Math.round(e/(t+(i||0))-(a||0))}(e.newPos,Ht.w,y.margin,X);wt.show({index:n,time:Te?Ze:e.time,overPos:e.overPos,user:!0})}else e.aborted||e.control||(a=e.startEvent,o=a.target,$(o).hasClass(O)?wt.playVideo():o===qt?wt.toggleFullScreen():z?o===Wt&&Ri(z,!0,!0):i.hasClass(S)||wt.requestFullScreen())},timeLow:1,timeHigh:1,friction:2,select:"."+F+", ."+F+" *",$wrap:Mt,direction:"horizontal"}),Gt=st(zt,{onStart:$i,onMove:function(e,t){Wi(Ot,t.edge)},onTouchEnd:Di,onEnd:function(e){function t(){Ii.l=e.newPos,ji(),Ni(),Ci(e.newPos,!0),Mi()}if(e.moved)e.pos!==e.newPos?(mt=!0,at(zt,{time:e.time,pos:e.newPos,overPos:e.overPos,direction:y.navdir,onEnd:t}),Ci(e.newPos),et&&Wi(Ot,ze(e.newPos,Gt.min,Gt.max,e.dir))):t();else{var i=e.$target.closest(".fotorama__nav__frame",zt)[0];i&&Gi.call(i,e.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:Ot,direction:y.navdir}),Kt=lt(Mt,{shift:!0,onEnd:function(e,t){$i(),Di(),wt.show({index:t,slow:e.altKey})}}),Jt=lt(Ot,{onEnd:function(e,t){$i(),Di();var i=Se(zt)+.25*t;zt.css(we(ge(i,Gt.min,Gt.max),y.navdir)),et&&Wi(Ot,ze(i,Gt.min,Gt.max,y.navdir)),Jt.prevent={"<":i>=Gt.max,">":i<=Gt.min},clearTimeout(Jt.t),Jt.t=setTimeout((function(){Ii.l=i,Ci(i,!0)}),ne),Ci(i)}}),St.hover((function(){setTimeout((function(){pt||Yi(!(gt=!0))}),0)}),(function(){gt&&Yi(!(gt=!1))})),Ae(Et,(function(e){Ke(e),Ji.call(this,e)}),{onStart:function(){$i(),Ut.control=!0},onTouchEnd:Di}),Ae(jt,(function(e){Ke(e),"thumbs"===y.navtype?wt.show("<"):wt.showSlide("prev")})),Ae(Nt,(function(e){Ke(e),"thumbs"===y.navtype?wt.show(">"):wt.showSlide("next")})),Et.each((function(){He(this,(function(e){Ji.call(this,e)})),Zi(this)})),He(qt,(function(){i.hasClass(S)?(wt.cancelFullScreen(),Tt.focus()):(wt.requestFullScreen(),Xt.focus())})),Zi(qt),$.each("load push pop shift unshift reverse sort splice".split(" "),(function(e,t){wt[t]=function(){return b=b||[],"load"!==t?Array.prototype[t].apply(b,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(b=Ne(arguments[0])),Qi(),wt}})),Qi()},$.fn.fotorama=function(t){return this.each((function(){var i=this,a=$(this),o=a.data(),n=o.fotorama;n?n.setOptions(t,!0):Ve((function(){return!(0===(e=i).offsetWidth&&0===e.offsetHeight);var e}),(function(){o.urtext=a.html(),new $.Fotorama(a,$.extend({},he,e.fotoramaDefaults,t,o))}))}))},$.Fotorama.instances=[],$.Fotorama.cache={},$.Fotorama.measures={},($=$||{}).Fotorama=$.Fotorama||{},$.Fotorama.jst=$.Fotorama.jst||{},$.Fotorama.jst.dots=function(e){return'<div class="fotorama__nav__frame fotorama__nav__frame--dot" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__dot"></div>\r\n</div>','<div class="fotorama__nav__frame fotorama__nav__frame--dot" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__dot"></div>\r\n</div>'},$.Fotorama.jst.frameCaption=function(e){var t,i="";return i+='<div class="fotorama__caption" aria-hidden="true">\r\n    <div class="fotorama__caption__wrap" id="'+(null==(t=e.labelledby)?"":t)+'">'+(null==(t=e.caption)?"":t)+"</div>\r\n</div>\r\n"},$.Fotorama.jst.style=function(e){var t,i="";return i+=".fotorama"+(null==(t=e.s)?"":t)+" .fotorama__nav--thumbs .fotorama__nav__frame{\r\npadding:"+(null==(t=e.m)?"":t)+"px;\r\nheight:"+(null==(t=e.h)?"":t)+"px}\r\n.fotorama"+(null==(t=e.s)?"":t)+" .fotorama__thumb-border{\r\nheight:"+(null==(t=e.h)?"":t)+"px;\r\nborder-width:"+(null==(t=e.b)?"":t)+"px;\r\nmargin-top:"+(null==(t=e.m)?"":t)+"px}"},$.Fotorama.jst.thumb=function(e){return'<div class="fotorama__nav__frame fotorama__nav__frame--thumb" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__thumb">\r\n    </div>\r\n</div>','<div class="fotorama__nav__frame fotorama__nav__frame--thumb" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__thumb">\r\n    </div>\r\n</div>'}}(window,document,location,"undefined"!=typeof jQuery&&jQuery),require.s.contexts._.config.shim["fotorama/fotorama"]&&require.s.contexts._.config.shim["fotorama/fotorama"].exportsFn&&require.s.contexts._.config.shim["fotorama/fotorama"].exportsFn()}.bind(window)),define("mage/gallery/gallery",["jquery","fotorama/fotorama","underscore","matchMedia","mage/template","text!mage/gallery/gallery.html","uiClass","mage/translate"],(function($,e,t,i,a,o,n,r){"use strict";var s=function(e){var i;return t.every(e,(function(e){return t.isObject(e)}))&&(i=t.findIndex(e,(function(e){return e.isMain}))),i>0?i:0},l=function(e){return"string"===typeof e?parseInt(e):e};return n.extend({defaults:{settings:{},config:{},startConfig:{}},isTouchEnabled:"ontouchstart"in document.documentElement,initialize:function(e,i){var a=this;this._super(),t.bindAll(this,"_focusSwitcher"),this.isTouchEnabled&&(e.options.arrows=!1,e.fullscreen&&(e.fullscreen.arrows=!1)),e.options.width=l(e.options.width),e.options.height=l(e.options.height),e.options.thumbwidth=l(e.options.thumbwidth),e.options.thumbheight=l(e.options.thumbheight),e.options.swipe=!0,this.config=e,this.settings={$element:$(i),$pageWrapper:$("body>.page-wrapper"),currentConfig:e,defaultConfig:t.clone(e),fullscreenConfig:t.clone(e.fullscreen),breakpoints:e.breakpoints,activeBreakpoint:{},fotoramaApi:null,isFullscreen:!1,api:null,data:t.clone(e.data)},e.options.ratio=e.options.width/e.options.height,e.options.height=null,$.extend(!0,this.startConfig,e),this.initGallery(),this.initApi(),this.setupBreakpoints(),this.initFullscreenSettings(),this.settings.$element.on("click",".fotorama__stage__frame",(function(){$(this).parents(".fotorama__shadows--left, .fotorama__shadows--right").length||$(this).hasClass("fotorama-video-container")||a.openFullScreen()})),this.isTouchEnabled&&this.settings.isFullscreen&&this.settings.$element.on("tap",".fotorama__stage__frame",(function(){var e,t;"0"!==(e=$(this).parents(".fotorama__stage__shaft"),t=$(e).attr("style").split(";"),(t=$.map(t,(function(e){return!!(e=e.trim()).startsWith("transform: translate3d")&&e.match(/transform: translate3d\((.+)px,(.+)px,(.+)px\)/)}))).filter(Boolean))[1]||$(this).hasClass("fotorama-video-container")||(a.openFullScreen(),a.settings.$pageWrapper.hide())}))},openFullScreen:function(){this.settings.api.fotorama.requestFullScreen(),this.settings.$fullscreenIcon.css({opacity:1,visibility:"visible",display:"block"})},initFullscreenSettings:function(){var e=this.settings,i=this;e.$gallery=this.settings.$element.find('[data-gallery-role="gallery"]'),e.$fullscreenIcon=this.settings.$element.find('[data-gallery-role="fotorama__fullscreen-icon"]'),e.focusableStart=this.settings.$element.find('[data-gallery-role="fotorama__focusable-start"]'),e.focusableEnd=this.settings.$element.find('[data-gallery-role="fotorama__focusable-end"]'),e.closeIcon=this.settings.$element.find('[data-gallery-role="fotorama__fullscreen-icon"]'),e.fullscreenConfig.swipe=!0,e.$gallery.on("fotorama:fullscreenenter",(function(){e.closeIcon.show(),e.focusableStart.attr("tabindex","0"),e.focusableEnd.attr("tabindex","0"),e.focusableStart.bind("focusin",i._focusSwitcher),e.focusableEnd.bind("focusin",i._focusSwitcher),e.api.updateOptions(e.defaultConfig.options,!0),e.api.updateOptions(e.fullscreenConfig,!0),!t.isEqual(e.activeBreakpoint,{})&&e.breakpoints&&e.api.updateOptions(e.activeBreakpoint.options,!0),e.isFullscreen=!0})),e.$gallery.on("fotorama:fullscreenexit",(function(){e.closeIcon.hide(),e.focusableStart.attr("tabindex","-1"),e.focusableEnd.attr("tabindex","-1"),e.api.updateOptions(e.defaultConfig.options,!0),e.focusableStart.unbind("focusin",this._focusSwitcher),e.focusableEnd.unbind("focusin",this._focusSwitcher),e.closeIcon.hide(),!t.isEqual(e.activeBreakpoint,{})&&e.breakpoints&&e.api.updateOptions(e.activeBreakpoint.options,!0),e.isFullscreen=!1,e.$element.data("gallery").updateOptions({swipe:!0})}))},_focusSwitcher:function(e){var t=$(e.target),i=this.settings;t.is(i.focusableStart)?this._setFocus("start"):t.is(i.focusableEnd)&&this._setFocus("end")},_setFocus:function(e){var t,i=this.settings;"end"===e?i.$gallery.find(i.closeIcon).focus():"start"===e&&(3,(t=i.$gallery.find(":focusable")).eq(t.length-3).focus())},initGallery:function(){var e,i,n,l={},u=this.settings,d=this.config,c=a(o,{next:r("Next"),previous:r("Previous")}),m=u.$element;u.breakpoints&&(t.each(t.values(u.breakpoints),(function(e){var i;t.each(t.pairs(e.conditions),(function(e){i=i?i+" and ("+e[0]+": "+e[1]+")":"("+e[0]+": "+e[1]+")"})),l[i]=e.options})),u.breakpoints=l),t.extend(d,d.options,{options:void 0,click:!1,breakpoints:null}),u.currentConfig=d,m.css("min-height",u.$element.height()).append(c),i=m.find('[data-gallery-role="gallery"]'),(n=i.find(".fotorama__stage")).css("position","absolute"),i.fotorama(d),i.find(".fotorama__stage__frame.fotorama__active").one("f:load",(function(){m.find(".gallery-placeholder__image").remove(),m.removeClass("_block-content-loading").css("min-height",""),n.css("position","")})),u.$elementF=i,u.fotoramaApi=i.data("fotorama"),$.extend(!0,d,this.startConfig),(e=s(d.data))&&this.settings.fotoramaApi.show({index:e,time:0})},setupBreakpoints:function(){var e,a=this.settings,o=this.config,n=this.startConfig,r={},s=this.isTouchEnabled;t.isObject(a.breakpoints)&&(e=t.pairs(a.breakpoints),t.each(e,(function(e){var l=e[0];r[l]=!1,i({media:l,entry:function(){$.extend(!0,o,t.clone(n)),a.api.updateOptions(a.defaultConfig.options,!0),a.isFullscreen&&a.api.updateOptions(a.fullscreenConfig,!0),s&&(a.breakpoints[l].options.arrows=!1,a.breakpoints[l].options.fullscreen&&(a.breakpoints[l].options.fullscreen.arrows=!1)),a.api.updateOptions(a.breakpoints[l].options,!0),$.extend(!0,o,a.breakpoints[l]),a.activeBreakpoint=a.breakpoints[l],r[l]=!0},exit:function(){r[l]?($.extend(!0,o,t.clone(n)),a.api.updateOptions(a.defaultConfig.options,!0),a.isFullscreen&&a.api.updateOptions(a.fullscreenConfig,!0),a.activeBreakpoint={}):r[l]=!0}})})))},initApi:function(){var e=this.settings,i=this.config,a={fotorama:e.fotoramaApi,last:function(){e.fotoramaApi.show(">>")},first:function(){e.fotoramaApi.show("<<")},prev:function(){e.fotoramaApi.show("<")},next:function(){e.fotoramaApi.show(">")},seek:function(i){t.isNumber(i)&&0!==i&&(i>0&&(i-=1),e.fotoramaApi.show(i))},updateOptions:function(i,a){var o,n=$("a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]").not("[tabindex=-1], [disabled], :hidden"),r=$(":focus");t.isObject(i)&&(n.each((function(e){$(this).is(r)&&(o=e)})),this.isTouchEnabled&&(i.arrows=!1),i.click=!1,i.breakpoints=null,a||(t.isEqual(e.activeBreakpoint,{}&&e.brekpoints)?e.isFullscreen?$.extend(!0,e.fullscreenConfig,i):$.extend(!0,e.defaultConfig.options,i):$.extend(!0,e.activeBreakpoint.options,i)),$.extend(!0,e.currentConfig.options,i),e.fotoramaApi.setOptions(e.currentConfig.options),t.isNumber(o)&&n.eq(o).focus())},updateData:function(a){var o;t.isArray(a)&&(e.fotoramaApi.load(a),o=s(a),e.fotoramaApi.activeIndex!==o&&e.fotoramaApi.show({index:o,time:0}),$.extend(!1,e,{data:a,defaultConfig:a}),$.extend(!1,i,{data:a}))},returnCurrentImages:function(){var e=[];return t.each(this.fotorama.data,(function(i){e.push(t.omit(i,"$navThumbFrame","$navDotFrame","$stageFrame","labelledby"))})),e},updateDataByIndex:function(t,i){e.fotoramaApi.spliceByIndex(t,i)}};e.$element.data("gallery",a),e.api=e.$element.data("gallery"),e.$element.trigger("gallery:loaded")}})}));