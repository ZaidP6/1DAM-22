define(['uiComponent','uiRegistry','jquery','ko','mage/translate'],function(Component,registry,$,ko,$t){'use strict';return Component.extend({defaults:{deliveryMessage:ko.observable($t('Select a size')),isCrossFulfilled:ko.observable(false)},initialize:function(config,element){this._super();this.swatches=$('.swatch-opt');this.element=$(element);registry.set('delivery-message',this);this.initializeSwatches();return this;},updateDelivery:function(swatchGroup){var options=swatchGroup.data('mage-SwatchRenderer').options,selected=parseInt(swatchGroup.find('.swatch-attribute').attr('data-option-selected')),swatchId=parseInt(swatchGroup.find('.swatch-attribute-options').find('[data-option-id="'+selected+'"]').attr('data-option-id')),deliverySwatch=options.jsonConfig.deliveryDates[swatchId],isCrossFulfilled=options.jsonConfig.isCrossFulfilled[swatchId],deliveryMessage=deliverySwatch?deliverySwatch.message:null;this.deliveryMessage(deliveryMessage?deliveryMessage:$t('Ready for Dispatch'));this.isCrossFulfilled(isCrossFulfilled);},setupSwatchListener:function(swatchInput,swatchGroup){var self=this;swatchInput.on('change',function(event){var swatchIsSelected=!!$(event.target).val();swatchIsSelected?self.updateDelivery(swatchGroup):self.deliveryMessage($t('Select a size'));});},initializeSwatches:function(){var self=this;this.swatches.each(function(){var swatch=$(this);swatch.on('swatch.initialized',function(){var swatchInput=swatch.find('.swatch-input'),hasOptions=!!$(this).find('.swatch-option').length;if(hasOptions&&!!swatchInput.length){self.setupSwatchListener(swatchInput,swatch);}});})}});});