!function(){"use strict";var e,t=function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=Number(new Date)+(t||12e3),i=o||200,a=function t(o,a){var c=e();c?o(c):Number(new Date)<r?setTimeout(t,i,o,a):"function"==typeof n&&n.call()};return new Promise(a)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=o.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},n={},r=n.hasOwnProperty,i=function(e,t){r.call(n,e)||(n[e]=[]);var o=n[e].push(t)-1;return{remove:function(){delete n[e][o]}}},a=function(e,t){r.call(n,e)&&n[e].forEach((function(e){e(null!=t?t:{})}))},c={country:((null===(e=location.pathname.match(/^\/([\w_]+)\//i))||void 0===e?void 0:e[1])||"").substr(-2),currency:window.dlCurrencyCode},u=null;try{var d;u=null===(d=JSON.parse(localStorage.getItem("mage-cache-storage")))||void 0===d?void 0:d.cart}catch(e){}i("event-sent",(function(e){if("add-to-cart"==e.type&&u){var t,o,n={item_count:(null===(t=u)||void 0===t?void 0:t.summary_count)||"",total_price:null===(o=u)||void 0===o?void 0:o.subtotalAmount};f("cart-on-add-to-bag",n)}}));var l={".cms-home .banner-wrapper":{type:"homepage-hero"},".navigation .ui-menu":{type:"menu-navigation",data:function(e){var t,o,n=e.target.closest("a"),r=1;return e.target.closest(".level1")&&(r=2),{text:(null==n||null===(t=n.innerText)||void 0===t||null===(o=t.trim)||void 0===o?void 0:o.call(t))||"",type:"link",medium:window.innerWidth>=1440?"desktop":"mobile",level:r}}},".item.delivery-returns":{type:"view-product-delivery"},".item.description":{type:"view-product-details"},".product-info-main .key-features":{type:"product-description"},".main .block.related":{type:"product-recs"},".product.actions .action.delete":{type:"remove-from-cart"},".upsell-option":{type:"upsell-commitment"}},m=function(){var e=localStorage.getItem("mmai_uid"),t=sessionStorage.getItem("mmai_sid");if(!e){var o="MMU"+(+ +new Date+1e6*Math.random());localStorage.setItem("mmai_uid",o),e=o}if(!t){var n="MMS"+(+ +new Date+3e6*Math.random());sessionStorage.setItem("mmai_sid",n),t=n}return{getData:function(){var o=+new Date,n=localStorage.getItem("mmai_hit_ts");return{uid:e,sid:t,hitId:localStorage.getItem("mmai_hitid"),url:location.href,userAgent:navigator.userAgent,screenWidth:window.innerWidth,screenHeight:window.innerHeight,referrer:document.referrer,timezone_offset:-(new Date).getTimezoneOffset()/60,country:c.country,currency:c.currency,client_ts:o,hit_ts_diff:n?o-n:0}}}},v="ruroc",s="https://t4yqn9m5lg.execute-api.us-east-1.amazonaws.com/ieventcapture",p=function(){return function(e){for(var t=0,o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t&=t;return new Uint32Array([t])[0].toString(36)}(+new Date+location.href)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={type:e,data:t,clientId:v};if("pageview"==e&&(localStorage.setItem("mmai_hitid",p()),localStorage.setItem("mmai_hit_ts",+new Date)),"click"==e){var n,r,i,c,u,d,l,f,g,h,y,w={pageX:null===(n=window)||void 0===n||null===(r=n.event)||void 0===r?void 0:r.pageX,pageY:null===(i=window)||void 0===i||null===(c=i.event)||void 0===c?void 0:c.pageY,offsetX:null===(u=window)||void 0===u||null===(d=u.event)||void 0===d?void 0:d.offsetX,offsetY:null===(l=window)||void 0===l||null===(f=l.event)||void 0===f?void 0:f.offsetY,targetClassName:null===(g=window)||void 0===g||null===(h=g.event)||void 0===h||null===(y=h.target)||void 0===y?void 0:y.className};o.data.clientEvent=w}var b=m(),S=b.getData();S&&(o=Object.assign({},o,S)),["time-on-page"].indexOf(o.type)>-1?navigator.sendBeacon(s,JSON.stringify(o)):fetch(s,{method:"POST",body:JSON.stringify(o)}).then((function(){})),localStorage.getItem("mmai__debug")&&console.log(JSON.stringify(o,null,2)),a("event-sent",o)},g=null,h=[];window._mmai=window._mmai||{},window._mmai.sendTag=f,function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=localStorage.getItem("mmai__bucket");if(t)return t;var o=Math.ceil(Math.random()*e);return localStorage.setItem("mmai__bucket",o),o}(1);if(1==e){window._mmai.active=1,f("pageview");var n=!1,r=+new Date;document.addEventListener("mousedown",(function(e){n||(f("time-to-first-interaction",{value:+new Date-r}),n=!0)}));var d=0;document.addEventListener("mouseout",(function(e){d>0||e.toElement||e.relatedTarget||(f("exit-intent",{type:"pointer"}),++d)}));var m,v=function(e){var t=Object.keys(e);return function(o){if(t.forEach((function(t){if(o.target.closest(t)){var n=e[t],r=n.type,i="function"==typeof n.data?n.data(o):n.data||{};a("click-map",{eventType:r,eventData:i})}})),h.push(Date.now()),h.length>=5){var n=h.slice(h.length-5);n[4]-n[0]<1e3&&(clearTimeout(g),g=setTimeout((function(){a("rage-clicks")}),1e3))}}}(l);document.addEventListener("mousedown",v),i("click-map",(function(e){f(e.eventType,e.eventData)})),i("rage-clicks",(function(){f("rage-clicks")})),m=function(){var e=document.documentElement,t=Math.max(e.clientHeight,e.scrollHeight,e.offsetHeight)-window.innerHeight,o=t/4,n=t/2,r=t/4*3,i=!1,a=!1,c=!1,u=!1;document.addEventListener("scroll",(function(){!1===i&&document.documentElement.scrollTop>o&&(i=!0,f("scroll-tracking",{behaviour:"reached-quarter-down"})),!1===a&&document.documentElement.scrollTop>n&&(a=!0,f("scroll-tracking",{behaviour:"reached-half-down"})),!1===c&&document.documentElement.scrollTop>r&&(c=!0,f("scroll-tracking",{behaviour:"reached-threequarter-down"})),!1===u&&document.documentElement.scrollTop>=t&&(u=!0,f("scroll-tracking",{behaviour:"reached-full"})),!0===i&&document.documentElement.scrollTop<o&&(i=!1,f("scroll-tracking",{behaviour:"reached-quarter-up"})),!0===a&&document.documentElement.scrollTop<n&&(a=!1,f("scroll-tracking",{behaviour:"reached-half-up"})),!0===c&&document.documentElement.scrollTop<r&&(c=!1,f("scroll-tracking",{behaviour:"reached-threequarter-up"}))}),{passive:!0})},"complete"===document.readyState||"loaded"===document.readyState?m():document.addEventListener("DOMContentLoaded",m),window.addEventListener("blur",(function(){f("time-on-page",{behaviour:"blur"})})),window.addEventListener("beforeunload",(function(){f("time-on-page",{behaviour:"unload"})})),function(){var e,n,r,i;document.body.addEventListener("click",(function(e){if(e.target.closest(".action.tocart")){try{var o;u=null===(o=JSON.parse(localStorage.getItem("mage-cache-storage")))||void 0===o?void 0:o.cart}catch(e){}t((function(){var e=dataLayer.filter((function(e){var t,o,n;return null==e||null===(t=e.ecommerce)||void 0===t||null===(o=t.add)||void 0===o||null===(n=o.products)||void 0===n?void 0:n[0]}));return e.length>0}),1e4,50).then((function(){var e,t,o=dataLayer.filter((function(e){var t,o,n;return null==e||null===(t=e.ecommerce)||void 0===t||null===(o=t.add)||void 0===o||null===(n=o.products)||void 0===n?void 0:n[0]})),n=o[0].ecommerce.add.products[0],r={target:"cta",product_id:n.id,price:n.price,quantity:n.quantity,category:(null===(e=document.querySelector("meta[name=keywords]"))||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"content"))||"",brand:"",currency:c.currency};f("add-to-cart",r)}))}}));var a,d,l,m,v,s,p,g,h=document.querySelector(".product-info-main");if(h&&h.addEventListener("mouseup",(function(e){var t=document.getSelection();t&&(t+"").length&&f("highlights-product-text",{text:(t+"").substr(0,100)})})),null!==(e=document.body.getAttribute("itemtype"))&&void 0!==e&&null!==(n=e.match)&&void 0!==n&&n.call(e,/product/i)){var y={productId:(null===(a=document.querySelector("[data-product-sku]"))||void 0===a||null===(d=a.getAttribute)||void 0===d?void 0:d.call(a,"data-product-sku"))||"",productPrice:(null===(l=document.querySelector('[data-price-type="finalPrice"]'))||void 0===l||null===(m=l.getAttribute)||void 0===m?void 0:m.call(l,"data-price-amount"))||"",productName:(null===(v=document.querySelector('meta[property="og:title"]'))||void 0===v||null===(s=v.getAttribute)||void 0===s?void 0:s.call(v,"content"))||"",productCategory:(null===(p=document.querySelector("meta[name=keywords]"))||void 0===p||null===(g=p.getAttribute)||void 0===g?void 0:g.call(p,"content"))||""};f("pdp-detail",{productId:y.productId,productPrice:y.productPrice,productCategory:y.productCategory,productBrand:"",productName:y.productName,currency:c.currency})}var w=document.querySelector(".product-main .product.media");if(w){var b=!1;w.addEventListener("pointerdown",(function(){b||(f("pdp-imagery-interaction",{}),b=!0)}),{passive:!0})}if(null!==(r=document.body.getAttribute("itemtype"))&&void 0!==r&&null!==(i=r.match)&&void 0!==i&&i.call(r,/product/i)){var S=document.querySelector(".fotorama-video-container");S&&S.addEventListener("pointerdown",(function(){f("video-view",{})}));var _=setInterval((function(){var e=document.activeElement;e&&"IFRAME"==e.tagName&&e.src.match(/youtube|vimeo/)&&(clearInterval(_),f("video-view",{}))}),1e3)}setTimeout((function(){[[".block.related","view-product-recs"]].forEach((function(e){var t=document.querySelector(e[0]);if(t){var o=null;(o=new IntersectionObserver((function(t){t[0].intersectionRatio>=.5&&(f(e[1]),o.disconnect())}),{threshold:.5})).observe(t)}}))})),location.href.indexOf("/catalogsearch/result/?q=")>-1&&f("search",{term:o("q")});var E=document.querySelector(".new-discount-code-form");E&&E.addEventListener("submit",(function(e){var t=E.querySelector('[name="discount_code"]');t&&f("voucher-usage",{code:t.value})})),location.pathname.match(/checkout\/onepage\/success/i)&&t((function(){var e,t=null===(e=(window.dataLayer||[]).filter((function(e){return e.ecommerce})))||void 0===e?void 0:e[0];return!!(t&&t.ecommerce&&t.ecommerce.purchase&&t.ecommerce.purchase.actionField)})).then((function(){for(var e,t,o,n,r,i=null===(e=(window.dataLayer||[]).filter((function(e){return e.ecommerce})))||void 0===e?void 0:e[0],a=(null===(t=i.ecommerce.purchase.actionField)||void 0===t?void 0:t.id)||"",c=(null===(o=i.ecommerce.purchase.actionField)||void 0===o?void 0:o.revenue)||"",u=(null===(n=i.ecommerce.purchase.actionField)||void 0===n?void 0:n.coupon)||"",d=(null===(r=i.ecommerce.purchase)||void 0===r?void 0:r.products)||[],l=[],m=0;m<d.length;m++){var v=d[m],s={"Product Name":v.name,"Product ID":v.id,"Product Price":v.price,"Product Qty":v.quantity,"Product Variant":v.variant||"","Product Category":v.category||""};l.push(s)}f("purchase-success",{orderID:a,orderAmount:c,voucher:u,products:l})}))}()}}()}();