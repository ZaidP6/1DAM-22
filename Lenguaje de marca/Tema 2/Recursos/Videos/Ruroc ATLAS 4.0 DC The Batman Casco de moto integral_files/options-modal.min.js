define(['jquery','uiRegistry','mage/url','text!template/popup/navigation/options-modal.html','jquery-ui-modules/widget','jquery-ui-modules/core','js/popup/default','Magento_Checkout/js/view/minicart'],function($,registry,urlBuilder,popupTemplate){'use strict';$.widget('rugento.popupOptions',$.rugento.popupDefault,{options:{popupTpl:popupTemplate},_create:function(){this._super();this.html=$('html');this.minicart=registry.get('minicart_content');this.minicartToggle=this.modal.find('.modal-header-options-option.minicart');this.setupAccountListener();if(!!this.minicart){this.openMinicart=this.minicart.openMinicart.bind(this.minicart);this.setupMinicartListener();}else{this.minicartToggle.hide();}
return this;},setupMinicartListener:function(){var self=this,minicart=this.modal.find('.modal-header-options-option.minicart');minicart.on('click',function(){self.closeNavigation();self.closeModal();self.openMinicart();});},setupAccountListener:function(){var account=this.modal.find('.modal-header-options-option.account'),url=urlBuilder.build('customer/account');account.on('click',function(){window.location.href=url;});},closeNavigation:function(){this.html.removeClass('nav-before-open nav-open');}});return $.rugento.popupOptions;});