define(['jquery','mage/translate','uiRegistry','js/popup/catalog/product/sizing'],function($,$t,registry){'use strict';return function(widget){$.widget('mage.SwatchRenderer',widget,{_RenderControls:function(){this._super();var sizingGuide=registry.get('sizing-popup');if(!!sizingGuide){var sizeElement=this.element.find('.size .swatch-attribute-label'),sizingGuideElementText=$t('Sizing Guide'),sizingGuideElement=$('<div class="sizing-popup-trigger">'+'<img src="'+require.toUrl('Magento_Catalog/images/measuring-tape.png')+'" />'+'<span>'+sizingGuideElementText+'</span>'+'</div>');sizeElement.append(sizingGuideElement);}},_OnClick:function($this,$widget,eventName){this._super($this,$widget,eventName);if($this.hasClass('disabled')){return;}
$widget._UpdateUpsells($this);},_UpdateUpsells:function($this){var optionId=$this.attr('data-option-id'),upsellOptions=$('.option-upsells'),upsellCheckboxes=$('.description-upsells-container .upsell-option-checkbox'),upsellOption=$('#'+optionId+'-upsells'),configurableUpsells=$('.configurable-upsells')
if(configurableUpsells.length>0){$(document).trigger('upsellsUnselect');upsellOptions.hide();upsellCheckboxes.attr('checked',false);if(!upsellOption.length){return;}
if($this.hasClass('selected')){upsellOption.show();}}},_RenderSwatchOptions:function(config,controlId){var optionConfig=this.options.jsonSwatchConfig[config.id],optionClass=this.options.classes.optionClass,sizeConfig=this.options.jsonSwatchImageSizeConfig,moreLimit=parseInt(this.options.numberToShow,10),moreClass=this.options.classes.moreButton,moreText=this.options.moreButtonText,countAttributes=0,html='';if(!this.options.jsonSwatchConfig.hasOwnProperty(config.id)){return'';}
$.each(config.options,function(index){var id,type,value,thumb,label,width,height,attr,swatchImageWidth,swatchImageHeight;if(!optionConfig.hasOwnProperty(this.id)){return'';}
if(moreLimit===countAttributes++){html+='<a href="#" class="'+moreClass+'"><span>'+moreText+'</span></a>';}
id=this.id;type=parseInt(optionConfig[id].type,10);value=optionConfig[id].hasOwnProperty('value')?$('<i></i>').text(optionConfig[id].value).html():'';thumb=optionConfig[id].hasOwnProperty('thumb')?optionConfig[id].thumb:'';width=_.has(sizeConfig,'swatchThumb')?sizeConfig.swatchThumb.width:110;height=_.has(sizeConfig,'swatchThumb')?sizeConfig.swatchThumb.height:90;label=this.label?$('<i></i>').text(this.label).html():'';attr=' id="'+controlId+'-item-'+id+'"'+' index="'+index+'"'+' aria-checked="false"'+' aria-describedby="'+controlId+'"'+' tabindex="0"'+' data-option-type="'+type+'"'+' data-option-id="'+id+'"'+' data-option-label="'+value+'"'+' aria-label="'+value+'"'+' role="option"'+' data-thumb-width="'+width+'"'+' data-thumb-height="'+height+'"';attr+=thumb!==''?' data-option-tooltip-thumb="'+thumb+'"':'';attr+=value!==''?' data-option-tooltip-value="'+value+'"':'';swatchImageWidth=_.has(sizeConfig,'swatchImage')?sizeConfig.swatchImage.width:30;swatchImageHeight=_.has(sizeConfig,'swatchImage')?sizeConfig.swatchImage.height:20;if(!this.hasOwnProperty('products')||this.products.length<=0){attr+=' data-option-empty="true"';}
if(type===0){html+='<div class="'+optionClass+' text" '+attr+'>'+(label?label:value)+'</div>';}else if(type===1){html+='<div class="'+optionClass+' color" '+attr+' style="background: '+value+' no-repeat center; background-size: initial;">'+''+'</div>';}else if(type===2){html+='<div class="'+optionClass+' image" '+attr+' style="background: url('+value+') no-repeat center; background-size: initial;width:'+
swatchImageWidth+'px; height:'+swatchImageHeight+'px">'+''+'</div>';}else if(type===3){html+='<div class="'+optionClass+'" '+attr+'></div>';}else{html+='<div class="'+optionClass+'" '+attr+'>'+label+'</div>';}});return html;}});return $.mage.SwatchRenderer;}});